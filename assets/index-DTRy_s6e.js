const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Show-o4aK0LJ5.js","./Show-sng-ORuC.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();const L={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return nn(this.context.count)},getNextContextId(){return nn(this.context.count++)}};function nn(t){const e=String(t),n=e.length-1;return L.context.id+(n?String.fromCharCode(96+n):"")+e}function _t(t){L.context=t}const gn=!1,_n=(t,e)=>t===e,Pe=Symbol("solid-proxy"),Zi=typeof Proxy=="function",fr=Symbol("solid-track"),Lt={equals:_n};let En=Tn;const Ae=1,It=2,yn={owned:null,cleanups:null,context:null,owner:null},ar={};var G=null;let lr=null,Ji=null,X=null,he=null,Te=null,Xt=0;function xt(t,e){const n=X,o=G,a=t.length===0,c=e===void 0?o:e,h=a?yn:{owned:null,cleanups:null,context:c?c.context:null,owner:c},f=a?t:()=>t(()=>de(()=>kt(h)));G=h,X=null;try{return Ne(f,!0)}finally{X=n,G=o}}function be(t,e){e=e?Object.assign({},Lt,e):Lt;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},o=a=>(typeof a=="function"&&(a=a(n.value)),Sn(n,a));return[On.bind(n),o]}function eo(t,e,n){const o=Tt(t,e,!0,Ae);qe(o)}function Ut(t,e,n){const o=Tt(t,e,!1,Ae);qe(o)}function to(t,e,n){En=co;const o=Tt(t,e,!1,Ae);o.user=!0,Te?Te.push(o):qe(o)}function Re(t,e,n){n=n?Object.assign({},Lt,n):Lt;const o=Tt(t,e,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=n.equals||void 0,qe(o),On.bind(o)}function ro(t){return t&&typeof t=="object"&&"then"in t}function kn(t,e,n){let o,a,c;typeof e=="function"?(o=t,a=e,c=n||{}):(o=!0,a=t,c=e||{});let h=null,f=ar,p=null,g=!1,w="initialValue"in c,E=typeof o=="function"&&Re(o);const O=new Set,[T,S]=(c.storage||be)(c.initialValue),[M,x]=be(void 0),[z,K]=be(void 0,{equals:!1}),[ee,W]=be(w?"ready":"unresolved");L.context&&(p=L.getNextContextId(),c.ssrLoadFrom==="initial"?f=c.initialValue:L.load&&L.has(p)&&(f=L.load(p)));function v(Z,b,Y,ie){return h===Z&&(h=null,ie!==void 0&&(w=!0),(Z===f||b===f)&&c.onHydrated&&queueMicrotask(()=>c.onHydrated(ie,{value:b})),f=ar,Q(b,Y)),b}function Q(Z,b){Ne(()=>{b===void 0&&S(()=>Z),W(b!==void 0?"errored":w?"ready":"unresolved"),x(b);for(const Y of O.keys())Y.decrement();O.clear()},!1)}function D(){const Z=so,b=T(),Y=M();if(Y!==void 0&&!h)throw Y;return X&&X.user,b}function ne(Z=!0){if(Z!==!1&&g)return;g=!1;const b=E?E():o;if(b==null||b===!1){v(h,de(T));return}let Y;const ie=f!==ar?f:de(()=>{try{return a(b,{value:T(),refetching:Z})}catch(Ce){Y=Ce}});if(Y!==void 0){v(h,void 0,Dt(Y),b);return}else if(!ro(ie))return v(h,ie,void 0,b),ie;return h=ie,"v"in ie?(ie.s===1?v(h,ie.v,void 0,b):v(h,void 0,Dt(ie.v),b),ie):(g=!0,queueMicrotask(()=>g=!1),Ne(()=>{W(w?"refreshing":"pending"),K()},!1),ie.then(Ce=>v(ie,Ce,void 0,b),Ce=>v(ie,void 0,Dt(Ce),b)))}Object.defineProperties(D,{state:{get:()=>ee()},error:{get:()=>M()},loading:{get(){const Z=ee();return Z==="pending"||Z==="refreshing"}},latest:{get(){if(!w)return D();const Z=M();if(Z&&!h)throw Z;return T()}}});let le=G;return E?eo(()=>(le=G,ne(!1))):ne(!1),[D,{refetch:Z=>no(le,()=>ne(Z)),mutate:S}]}function Js(t,e=_n,n){const o=new Map,a=Tt(c=>{const h=t();for(const[f,p]of o.entries())if(e(f,h)!==e(f,c))for(const g of p.values())g.state=Ae,g.pure?he.push(g):Te.push(g);return h},void 0,!0,Ae);return qe(a),c=>{const h=X;if(h){let f;(f=o.get(c))?f.add(h):o.set(c,f=new Set([h])),bn(()=>{f.delete(h),!f.size&&o.delete(c)})}return e(c,a.value)}}function vn(t){return Ne(t,!1)}function de(t){if(X===null)return t();const e=X;X=null;try{return t()}finally{X=e}}function ea(t,e,n){const o=Array.isArray(t);let a;return c=>{let h;if(o){h=Array(t.length);for(let p=0;p<t.length;p++)h[p]=t[p]()}else h=t();const f=de(()=>e(h,a,c));return a=h,f}}function ta(t){to(()=>de(t))}function bn(t){return G===null||(G.cleanups===null?G.cleanups=[t]:G.cleanups.push(t)),t}function hr(){return X}function no(t,e){const n=G,o=X;G=t,X=null;try{return Ne(e,!0)}catch(a){Cr(a)}finally{G=n,X=o}}const[ra,na]=be(!1);function An(t,e){const n=Symbol("context");return{id:n,Provider:uo(n),defaultValue:t}}function io(t){let e;return G&&G.context&&(e=G.context[t.id])!==void 0?e:t.defaultValue}function oo(t){const e=Re(t),n=Re(()=>dr(e()));return n.toArray=()=>{const o=n();return Array.isArray(o)?o:o!=null?[o]:[]},n}let so;function On(){if(this.sources&&this.state)if(this.state===Ae)qe(this);else{const t=he;he=null,Ne(()=>jt(this),!1),he=t}if(X){const t=this.observers?this.observers.length:0;X.sources?(X.sources.push(this),X.sourceSlots.push(t)):(X.sources=[this],X.sourceSlots=[t]),this.observers?(this.observers.push(X),this.observerSlots.push(X.sources.length-1)):(this.observers=[X],this.observerSlots=[X.sources.length-1])}return this.value}function Sn(t,e,n){let o=t.value;return(!t.comparator||!t.comparator(o,e))&&(t.value=e,t.observers&&t.observers.length&&Ne(()=>{for(let a=0;a<t.observers.length;a+=1){const c=t.observers[a],h=lr&&lr.running;h&&lr.disposed.has(c),(h?!c.tState:!c.state)&&(c.pure?he.push(c):Te.push(c),c.observers&&Rn(c)),h||(c.state=Ae)}if(he.length>1e6)throw he=[],new Error},!1)),e}function qe(t){if(!t.fn)return;kt(t);const e=Xt;ao(t,t.value,e)}function ao(t,e,n){let o;const a=G,c=X;X=G=t;try{o=t.fn(e)}catch(h){return t.pure&&(t.state=Ae,t.owned&&t.owned.forEach(kt),t.owned=null),t.updatedAt=n+1,Cr(h)}finally{X=c,G=a}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?Sn(t,o):t.value=o,t.updatedAt=n)}function Tt(t,e,n,o=Ae,a){const c={fn:t,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:G,context:G?G.context:null,pure:n};return G===null||G!==yn&&(G.owned?G.owned.push(c):G.owned=[c]),c}function Bt(t){if(t.state===0)return;if(t.state===It)return jt(t);if(t.suspense&&de(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Xt);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===Ae)qe(t);else if(t.state===It){const o=he;he=null,Ne(()=>jt(t,e[0]),!1),he=o}}function Ne(t,e){if(he)return t();let n=!1;e||(he=[]),Te?n=!0:Te=[],Xt++;try{const o=t();return lo(n),o}catch(o){n||(Te=null),he=null,Cr(o)}}function lo(t){if(he&&(Tn(he),he=null),t)return;const e=Te;Te=null,e.length&&Ne(()=>En(e),!1)}function Tn(t){for(let e=0;e<t.length;e++)Bt(t[e])}function co(t){let e,n=0;for(e=0;e<t.length;e++){const o=t[e];o.user?t[n++]=o:Bt(o)}if(L.context){if(L.count){L.effects||(L.effects=[]),L.effects.push(...t.slice(0,n));return}_t()}for(L.effects&&(L.done||!L.count)&&(t=[...L.effects,...t],n+=L.effects.length,delete L.effects),e=0;e<n;e++)Bt(t[e])}function jt(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const o=t.sources[n];if(o.sources){const a=o.state;a===Ae?o!==e&&(!o.updatedAt||o.updatedAt<Xt)&&Bt(o):a===It&&jt(o,e)}}}function Rn(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=It,n.pure?he.push(n):Te.push(n),n.observers&&Rn(n))}}function kt(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),o=t.sourceSlots.pop(),a=n.observers;if(a&&a.length){const c=a.pop(),h=n.observerSlots.pop();o<a.length&&(c.sourceSlots[h]=o,a[o]=c,n.observerSlots[o]=h)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)kt(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)kt(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Dt(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Cr(t,e=G){throw Dt(t)}function dr(t){if(typeof t=="function"&&!t.length)return dr(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const o=dr(t[n]);Array.isArray(o)?e.push.apply(e,o):e.push(o)}return e}return t}function uo(t,e){return function(o){let a;return Ut(()=>a=de(()=>(G.context={...G.context,[t]:o.value},oo(()=>o.children))),void 0),a}}const fo=Symbol("fallback");function on(t){for(let e=0;e<t.length;e++)t[e]()}function ho(t,e,n={}){let o=[],a=[],c=[],h=0,f=e.length>1?[]:null;return bn(()=>on(c)),()=>{let p=t()||[],g=p.length,w,E;return p[fr],de(()=>{let T,S,M,x,z,K,ee,W,v;if(g===0)h!==0&&(on(c),c=[],o=[],a=[],h=0,f&&(f=[])),n.fallback&&(o=[fo],a[0]=xt(Q=>(c[0]=Q,n.fallback())),h=1);else if(h===0){for(a=new Array(g),E=0;E<g;E++)o[E]=p[E],a[E]=xt(O);h=g}else{for(M=new Array(g),x=new Array(g),f&&(z=new Array(g)),K=0,ee=Math.min(h,g);K<ee&&o[K]===p[K];K++);for(ee=h-1,W=g-1;ee>=K&&W>=K&&o[ee]===p[W];ee--,W--)M[W]=a[ee],x[W]=c[ee],f&&(z[W]=f[ee]);for(T=new Map,S=new Array(W+1),E=W;E>=K;E--)v=p[E],w=T.get(v),S[E]=w===void 0?-1:w,T.set(v,E);for(w=K;w<=ee;w++)v=o[w],E=T.get(v),E!==void 0&&E!==-1?(M[E]=a[w],x[E]=c[w],f&&(z[E]=f[w]),E=S[E],T.set(v,E)):c[w]();for(E=K;E<g;E++)E in M?(a[E]=M[E],c[E]=x[E],f&&(f[E]=z[E],f[E](E))):a[E]=xt(O);a=a.slice(0,h=g),o=p.slice(0)}return a});function O(T){if(c[E]=T,f){const[S,M]=be(E);return f[E]=M,e(p[E],S)}return e(p[E])}}}function it(t,e){return de(()=>t(e||{}))}function Nt(){return!0}const po={get(t,e,n){return e===Pe?n:t.get(e)},has(t,e){return e===Pe?!0:t.has(e)},set:Nt,deleteProperty:Nt,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:Nt,deleteProperty:Nt}},ownKeys(t){return t.keys()}};function cr(t){return(t=typeof t=="function"?t():t)?t:{}}function mo(){for(let t=0,e=this.length;t<e;++t){const n=this[t]();if(n!==void 0)return n}}function ia(...t){let e=!1;for(let h=0;h<t.length;h++){const f=t[h];e=e||!!f&&Pe in f,t[h]=typeof f=="function"?(e=!0,Re(f)):f}if(Zi&&e)return new Proxy({get(h){for(let f=t.length-1;f>=0;f--){const p=cr(t[f])[h];if(p!==void 0)return p}},has(h){for(let f=t.length-1;f>=0;f--)if(h in cr(t[f]))return!0;return!1},keys(){const h=[];for(let f=0;f<t.length;f++)h.push(...Object.keys(cr(t[f])));return[...new Set(h)]}},po);const n={},o=Object.create(null);for(let h=t.length-1;h>=0;h--){const f=t[h];if(!f)continue;const p=Object.getOwnPropertyNames(f);for(let g=p.length-1;g>=0;g--){const w=p[g];if(w==="__proto__"||w==="constructor")continue;const E=Object.getOwnPropertyDescriptor(f,w);if(!o[w])o[w]=E.get?{enumerable:!0,configurable:!0,get:mo.bind(n[w]=[E.get.bind(f)])}:E.value!==void 0?E:void 0;else{const O=n[w];O&&(E.get?O.push(E.get.bind(f)):E.value!==void 0&&O.push(()=>E.value))}}}const a={},c=Object.keys(o);for(let h=c.length-1;h>=0;h--){const f=c[h],p=o[f];p&&p.get?Object.defineProperty(a,f,p):a[f]=p?p.value:void 0}return a}function wo(t){let e,n;const o=a=>{const c=L.context;if(c){const[f,p]=be();L.count||(L.count=0),L.count++,(n||(n=t())).then(g=>{!L.done&&_t(c),L.count--,p(()=>g.default),_t()}),e=f}else if(!e){const[f]=kn(()=>(n||(n=t())).then(p=>p.default));e=f}let h;return Re(()=>(h=e())?de(()=>{if(!c||L.done)return h(a);const f=L.context;_t(c);const p=h(a);return _t(f),p}):"")};return o.preload=()=>n||((n=t()).then(a=>e=()=>a.default),n),o}let go=0;function oa(){return L.context?L.getNextContextId():`cl-${go++}`}const _o=t=>`Stale read from <${t}>.`;function sa(t){const e="fallback"in t&&{fallback:()=>t.fallback};return Re(ho(()=>t.each,t.children,e||void 0))}function aa(t){const e=t.keyed,n=Re(()=>t.when,void 0,void 0),o=e?n:Re(n,void 0,{equals:(a,c)=>!a==!c});return Re(()=>{const a=o();if(a){const c=t.children;return typeof c=="function"&&c.length>0?de(()=>c(e?a:()=>{if(!de(o))throw _o("Show");return n()})):c}return t.fallback},void 0,void 0)}const Eo=t=>Re(()=>t());function yo(t,e,n){let o=n.length,a=e.length,c=o,h=0,f=0,p=e[a-1].nextSibling,g=null;for(;h<a||f<c;){if(e[h]===n[f]){h++,f++;continue}for(;e[a-1]===n[c-1];)a--,c--;if(a===h){const w=c<o?f?n[f-1].nextSibling:n[c-f]:p;for(;f<c;)t.insertBefore(n[f++],w)}else if(c===f)for(;h<a;)(!g||!g.has(e[h]))&&e[h].remove(),h++;else if(e[h]===n[c-1]&&n[f]===e[a-1]){const w=e[--a].nextSibling;t.insertBefore(n[f++],e[h++].nextSibling),t.insertBefore(n[--c],w),e[a]=n[c]}else{if(!g){g=new Map;let E=f;for(;E<c;)g.set(n[E],E++)}const w=g.get(e[h]);if(w!=null)if(f<w&&w<c){let E=h,O=1,T;for(;++E<a&&E<c&&!((T=g.get(e[E]))==null||T!==w+O);)O++;if(O>w-f){const S=e[h];for(;f<w;)t.insertBefore(n[f++],S)}else t.replaceChild(n[f++],e[h++])}else h++;else e[h++].remove()}}}const sn="_$DX_DELEGATE";function ko(t,e,n,o={}){let a;return xt(c=>{a=c,e===document?t():vo(e,t(),e.firstChild?null:void 0,n)},o.owner),()=>{a(),e.textContent=""}}function la(t,e,n,o){let a;const c=()=>{const f=document.createElement("template");return f.innerHTML=t,f.content.firstChild},h=()=>(a||(a=c())).cloneNode(!0);return h.cloneNode=h,h}function ca(t,e=window.document){const n=e[sn]||(e[sn]=new Set);for(let o=0,a=t.length;o<a;o++){const c=t[o];n.has(c)||(n.add(c),e.addEventListener(c,bo))}}function ua(t,e,n){Fr(t)||(n==null?t.removeAttribute(e):t.setAttribute(e,n))}function fa(t,e){Fr(t)||(e==null?t.removeAttribute("class"):t.className=e)}function ha(t,e,n,o){if(Array.isArray(n)){const a=n[0];t.addEventListener(e,n[0]=c=>a.call(t,n[1],c))}else t.addEventListener(e,n,typeof n!="function"&&n)}function da(t,e,n={}){const o=Object.keys(e||{}),a=Object.keys(n);let c,h;for(c=0,h=a.length;c<h;c++){const f=a[c];!f||f==="undefined"||e[f]||(an(t,f,!1),delete n[f])}for(c=0,h=o.length;c<h;c++){const f=o[c],p=!!e[f];!f||f==="undefined"||n[f]===p||!p||(an(t,f,!0),n[f]=p)}return n}function pa(t,e,n){return de(()=>t(e,n))}function vo(t,e,n,o){if(n!==void 0&&!o&&(o=[]),typeof e!="function")return zt(t,e,o,n);Ut(a=>zt(t,e(),a,n),o)}function Fr(t){return!!L.context&&!L.done&&(!t||t.isConnected)}function an(t,e,n){const o=e.trim().split(/\s+/);for(let a=0,c=o.length;a<c;a++)t.classList.toggle(o[a],n)}function bo(t){if(L.registry&&L.events&&L.events.find(([p,g])=>g===t))return;let e=t.target;const n=`$$${t.type}`,o=t.target,a=t.currentTarget,c=p=>Object.defineProperty(t,"target",{configurable:!0,value:p}),h=()=>{const p=e[n];if(p&&!e.disabled){const g=e[`${n}Data`];if(g!==void 0?p.call(e,g,t):p.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&c(e.host),!0},f=()=>{for(;h()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),L.registry&&!L.done&&(L.done=_$HY.done=!0),t.composedPath){const p=t.composedPath();c(p[0]);for(let g=0;g<p.length-2&&(e=p[g],!!h());g++){if(e._$host){e=e._$host,f();break}if(e.parentNode===a)break}}else f();c(o)}function zt(t,e,n,o,a){const c=Fr(t);if(c){!n&&(n=[...t.childNodes]);let p=[];for(let g=0;g<n.length;g++){const w=n[g];w.nodeType===8&&w.data.slice(0,2)==="!$"?w.remove():p.push(w)}n=p}for(;typeof n=="function";)n=n();if(e===n)return n;const h=typeof e,f=o!==void 0;if(t=f&&n[0]&&n[0].parentNode||t,h==="string"||h==="number"){if(c||h==="number"&&(e=e.toString(),e===n))return n;if(f){let p=n[0];p&&p.nodeType===3?p.data!==e&&(p.data=e):p=document.createTextNode(e),n=et(t,n,o,p)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||h==="boolean"){if(c)return n;n=et(t,n,o)}else{if(h==="function")return Ut(()=>{let p=e();for(;typeof p=="function";)p=p();n=zt(t,p,n,o)}),()=>n;if(Array.isArray(e)){const p=[],g=n&&Array.isArray(n);if(pr(p,e,n,a))return Ut(()=>n=zt(t,p,n,o,!0)),()=>n;if(c){if(!p.length)return n;if(o===void 0)return n=[...t.childNodes];let w=p[0];if(w.parentNode!==t)return n;const E=[w];for(;(w=w.nextSibling)!==o;)E.push(w);return n=E}if(p.length===0){if(n=et(t,n,o),f)return n}else g?n.length===0?ln(t,p,o):yo(t,n,p):(n&&et(t),ln(t,p));n=p}else if(e.nodeType){if(c&&e.parentNode)return n=f?[e]:e;if(Array.isArray(n)){if(f)return n=et(t,n,o,e);et(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function pr(t,e,n,o){let a=!1;for(let c=0,h=e.length;c<h;c++){let f=e[c],p=n&&n[t.length],g;if(!(f==null||f===!0||f===!1))if((g=typeof f)=="object"&&f.nodeType)t.push(f);else if(Array.isArray(f))a=pr(t,f,p)||a;else if(g==="function")if(o){for(;typeof f=="function";)f=f();a=pr(t,Array.isArray(f)?f:[f],Array.isArray(p)?p:[p])||a}else t.push(f),a=!0;else{const w=String(f);p&&p.nodeType===3&&p.data===w?t.push(p):t.push(document.createTextNode(w))}}return a}function ln(t,e,n=null){for(let o=0,a=e.length;o<a;o++)t.insertBefore(e[o],n)}function et(t,e,n,o){if(n===void 0)return t.textContent="";const a=o||document.createTextNode("");if(e.length){let c=!1;for(let h=e.length-1;h>=0;h--){const f=e[h];if(a!==f){const p=f.parentNode===t;!c&&!h?p?t.replaceChild(a,f):t.insertBefore(a,n):p&&f.remove()}else c=!0}}else t.insertBefore(a,n);return[a]}const Ao="modulepreload",Oo=function(t,e){return new URL(t,e).href},cn={},Pn=function(e,n,o){let a=Promise.resolve();if(n&&n.length>0){let g=function(w){return Promise.all(w.map(E=>Promise.resolve(E).then(O=>({status:"fulfilled",value:O}),O=>({status:"rejected",reason:O}))))};const h=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");a=g(n.map(w=>{if(w=Oo(w,o),w in cn)return;cn[w]=!0;const E=w.endsWith(".css"),O=E?'[rel="stylesheet"]':"";if(!!o)for(let M=h.length-1;M>=0;M--){const x=h[M];if(x.href===w&&(!E||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${O}`))return;const S=document.createElement("link");if(S.rel=E?"stylesheet":Ao,E||(S.as="script"),S.crossOrigin="",S.href=w,p&&S.setAttribute("nonce",p),document.head.appendChild(S),E)return new Promise((M,x)=>{S.addEventListener("load",M),S.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${w}`)))})}))}function c(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return a.then(h=>{for(const f of h||[])f.status==="rejected"&&c(f.reason);return e().catch(c)})},mr=Symbol("store-raw"),ot=Symbol("store-node"),Fe=Symbol("store-has"),Cn=Symbol("store-self");function Fn(t){let e=t[Pe];if(!e&&(Object.defineProperty(t,Pe,{value:e=new Proxy(t,Ro)}),!Array.isArray(t))){const n=Object.keys(t),o=Object.getOwnPropertyDescriptors(t);for(let a=0,c=n.length;a<c;a++){const h=n[a];o[h].get&&Object.defineProperty(t,h,{enumerable:o[h].enumerable,get:o[h].get.bind(e)})}}return e}function Ie(t){let e;return t!=null&&typeof t=="object"&&(t[Pe]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function ct(t,e=new Set){let n,o,a,c;if(n=t!=null&&t[mr])return n;if(!Ie(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let h=0,f=t.length;h<f;h++)a=t[h],(o=ct(a,e))!==a&&(t[h]=o)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const h=Object.keys(t),f=Object.getOwnPropertyDescriptors(t);for(let p=0,g=h.length;p<g;p++)c=h[p],!f[c].get&&(a=t[c],(o=ct(a,e))!==a&&(t[c]=o))}return t}function $t(t,e){let n=t[e];return n||Object.defineProperty(t,e,{value:n=Object.create(null)}),n}function vt(t,e,n){if(t[e])return t[e];const[o,a]=be(n,{equals:!1,internal:!0});return o.$=a,t[e]=o}function So(t,e){const n=Reflect.getOwnPropertyDescriptor(t,e);return!n||n.get||!n.configurable||e===Pe||e===ot||(delete n.value,delete n.writable,n.get=()=>t[Pe][e]),n}function Nn(t){hr()&&vt($t(t,ot),Cn)()}function To(t){return Nn(t),Reflect.ownKeys(t)}const Ro={get(t,e,n){if(e===mr)return t;if(e===Pe)return n;if(e===fr)return Nn(t),n;const o=$t(t,ot),a=o[e];let c=a?a():t[e];if(e===ot||e===Fe||e==="__proto__")return c;if(!a){const h=Object.getOwnPropertyDescriptor(t,e);hr()&&(typeof c!="function"||t.hasOwnProperty(e))&&!(h&&h.get)&&(c=vt(o,e,c)())}return Ie(c)?Fn(c):c},has(t,e){return e===mr||e===Pe||e===fr||e===ot||e===Fe||e==="__proto__"?!0:(hr()&&vt($t(t,Fe),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:To,getOwnPropertyDescriptor:So};function _e(t,e,n,o=!1){if(!o&&t[e]===n)return;const a=t[e],c=t.length;n===void 0?(delete t[e],t[Fe]&&t[Fe][e]&&a!==void 0&&t[Fe][e].$()):(t[e]=n,t[Fe]&&t[Fe][e]&&a===void 0&&t[Fe][e].$());let h=$t(t,ot),f;if((f=vt(h,e,a))&&f.$(()=>n),Array.isArray(t)&&t.length!==c){for(let p=t.length;p<c;p++)(f=h[p])&&f.$();(f=vt(h,"length",c))&&f.$(t.length)}(f=h[Cn])&&f.$()}function Mn(t,e){const n=Object.keys(e);for(let o=0;o<n.length;o+=1){const a=n[o];_e(t,a,e[a])}}function Po(t,e){if(typeof e=="function"&&(e=e(t)),e=ct(e),Array.isArray(e)){if(t===e)return;let n=0,o=e.length;for(;n<o;n++){const a=e[n];t[n]!==a&&_e(t,n,a)}_e(t,"length",o)}else Mn(t,e)}function Et(t,e,n=[]){let o,a=t;if(e.length>1){o=e.shift();const h=typeof o,f=Array.isArray(t);if(Array.isArray(o)){for(let p=0;p<o.length;p++)Et(t,[o[p]].concat(e),n);return}else if(f&&h==="function"){for(let p=0;p<t.length;p++)o(t[p],p)&&Et(t,[p].concat(e),n);return}else if(f&&h==="object"){const{from:p=0,to:g=t.length-1,by:w=1}=o;for(let E=p;E<=g;E+=w)Et(t,[E].concat(e),n);return}else if(e.length>1){Et(t[o],e,[o].concat(n));return}a=t[o],n=[o].concat(n)}let c=e[0];typeof c=="function"&&(c=c(a,n),c===a)||o===void 0&&c==null||(c=ct(c),o===void 0||Ie(a)&&Ie(c)&&!Array.isArray(c)?Mn(a,c):_e(t,o,c))}function xn(...[t,e]){const n=ct(t||{}),o=Array.isArray(n),a=Fn(n);function c(...h){vn(()=>{o&&h.length===1?Po(n,h[0]):Et(n,h)})}return[a,c]}const wr=Symbol("store-root");function rt(t,e,n,o,a){const c=e[n];if(t===c)return;const h=Array.isArray(t);if(n!==wr&&(!Ie(t)||!Ie(c)||h!==Array.isArray(c)||a&&t[a]!==c[a])){_e(e,n,t);return}if(h){if(t.length&&c.length&&(!o||a&&t[0]&&t[0][a]!=null)){let g,w,E,O,T,S,M,x;for(E=0,O=Math.min(c.length,t.length);E<O&&(c[E]===t[E]||a&&c[E]&&t[E]&&c[E][a]===t[E][a]);E++)rt(t[E],c,E,o,a);const z=new Array(t.length),K=new Map;for(O=c.length-1,T=t.length-1;O>=E&&T>=E&&(c[O]===t[T]||a&&c[O]&&t[T]&&c[O][a]===t[T][a]);O--,T--)z[T]=c[O];if(E>T||E>O){for(w=E;w<=T;w++)_e(c,w,t[w]);for(;w<t.length;w++)_e(c,w,z[w]),rt(t[w],c,w,o,a);c.length>t.length&&_e(c,"length",t.length);return}for(M=new Array(T+1),w=T;w>=E;w--)S=t[w],x=a&&S?S[a]:S,g=K.get(x),M[w]=g===void 0?-1:g,K.set(x,w);for(g=E;g<=O;g++)S=c[g],x=a&&S?S[a]:S,w=K.get(x),w!==void 0&&w!==-1&&(z[w]=c[g],w=M[w],K.set(x,w));for(w=E;w<t.length;w++)w in z?(_e(c,w,z[w]),rt(t[w],c,w,o,a)):_e(c,w,t[w])}else for(let g=0,w=t.length;g<w;g++)rt(t[g],c,g,o,a);c.length>t.length&&_e(c,"length",t.length);return}const f=Object.keys(t);for(let g=0,w=f.length;g<w;g++)rt(t[f[g]],c,f[g],o,a);const p=Object.keys(c);for(let g=0,w=p.length;g<w;g++)t[p[g]]===void 0&&_e(c,p[g],void 0)}function ma(t,e={}){const{merge:n,key:o="id"}=e,a=ct(t);return c=>{if(!Ie(c)||!Ie(a))return a;const h=rt(a,{[wr]:c},wr,n,o);return h===void 0?c:h}}const Ht=["a","b","c","d","e","f","g","h"],Dn=["1","2","3","4","5","6","7","8"],We=["white","black"],ve=["pawn","knight","bishop","rook","queen","king"],Co=["a","h"],C=t=>t!==void 0,ae=t=>t==="white"?"black":"white",Ye=t=>t>>3,Ee=t=>t&7,gr=(t,e)=>0<=t&&t<8&&0<=e&&e<8?t+8*e:void 0,Kt=t=>{switch(t){case"pawn":return"p";case"knight":return"n";case"bishop":return"b";case"rook":return"r";case"queen":return"q";case"king":return"k"}};function Fo(t){switch(t.toLowerCase()){case"p":return"pawn";case"n":return"knight";case"b":return"bishop";case"r":return"rook";case"q":return"queen";case"k":return"king";default:return}}function No(t){if(t.length===2)return gr(t.charCodeAt(0)-97,t.charCodeAt(1)-49)}const Ln=t=>Ht[Ee(t)]+Dn[Ye(t)],Nr=(t,e)=>t==="white"?e==="a"?2:6:e==="a"?58:62,Mr=(t,e)=>t==="white"?e==="a"?3:5:e==="a"?59:61,un=t=>(t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),Math.imul(t+(t>>>4)&252645135,16843009)>>24),_r=t=>(t=t>>>8&16711935|(t&16711935)<<8,t>>>16&65535|(t&65535)<<16),fn=t=>(t=t>>>1&1431655765|(t&1431655765)<<1,t=t>>>2&858993459|(t&858993459)<<2,t=t>>>4&252645135|(t&252645135)<<4,_r(t));class k{lo;hi;constructor(e,n){this.lo=e|0,this.hi=n|0}static fromSquare(e){return e>=32?new k(0,1<<e-32):new k(1<<e,0)}static fromRank(e){return new k(255,0).shl64(8*e)}static fromFile(e){return new k(16843009<<e,16843009<<e)}static empty(){return new k(0,0)}static full(){return new k(4294967295,4294967295)}static corners(){return new k(129,2164260864)}static center(){return new k(402653184,24)}static backranks(){return new k(255,4278190080)}static backrank(e){return e==="white"?new k(255,0):new k(0,4278190080)}static lightSquares(){return new k(1437226410,1437226410)}static darkSquares(){return new k(2857740885,2857740885)}complement(){return new k(~this.lo,~this.hi)}xor(e){return new k(this.lo^e.lo,this.hi^e.hi)}union(e){return new k(this.lo|e.lo,this.hi|e.hi)}intersect(e){return new k(this.lo&e.lo,this.hi&e.hi)}diff(e){return new k(this.lo&~e.lo,this.hi&~e.hi)}intersects(e){return this.intersect(e).nonEmpty()}isDisjoint(e){return this.intersect(e).isEmpty()}supersetOf(e){return e.diff(this).isEmpty()}subsetOf(e){return this.diff(e).isEmpty()}shr64(e){return e>=64?k.empty():e>=32?new k(this.hi>>>e-32,0):e>0?new k(this.lo>>>e^this.hi<<32-e,this.hi>>>e):this}shl64(e){return e>=64?k.empty():e>=32?new k(0,this.lo<<e-32):e>0?new k(this.lo<<e,this.hi<<e^this.lo>>>32-e):this}bswap64(){return new k(_r(this.hi),_r(this.lo))}rbit64(){return new k(fn(this.hi),fn(this.lo))}minus64(e){const n=this.lo-e.lo,o=(n&e.lo&1)+(e.lo>>>1)+(n>>>1)>>>31;return new k(n,this.hi-(e.hi+o))}equals(e){return this.lo===e.lo&&this.hi===e.hi}size(){return un(this.lo)+un(this.hi)}isEmpty(){return this.lo===0&&this.hi===0}nonEmpty(){return this.lo!==0||this.hi!==0}has(e){return(e>=32?this.hi&1<<e-32:this.lo&1<<e)!==0}set(e,n){return n?this.with(e):this.without(e)}with(e){return e>=32?new k(this.lo,this.hi|1<<e-32):new k(this.lo|1<<e,this.hi)}without(e){return e>=32?new k(this.lo,this.hi&~(1<<e-32)):new k(this.lo&~(1<<e),this.hi)}toggle(e){return e>=32?new k(this.lo,this.hi^1<<e-32):new k(this.lo^1<<e,this.hi)}last(){if(this.hi!==0)return 63-Math.clz32(this.hi);if(this.lo!==0)return 31-Math.clz32(this.lo)}first(){if(this.lo!==0)return 31-Math.clz32(this.lo&-this.lo);if(this.hi!==0)return 63-Math.clz32(this.hi&-this.hi)}withoutFirst(){return this.lo!==0?new k(this.lo&this.lo-1,this.hi):new k(0,this.hi&this.hi-1)}moreThanOne(){return this.hi!==0&&this.lo!==0||(this.lo&this.lo-1)!==0||(this.hi&this.hi-1)!==0}singleSquare(){return this.moreThanOne()?void 0:this.last()}*[Symbol.iterator](){let e=this.lo,n=this.hi;for(;e!==0;){const o=31-Math.clz32(e&-e);e^=1<<o,yield o}for(;n!==0;){const o=31-Math.clz32(n&-n);n^=1<<o,yield 32+o}}*reversed(){let e=this.lo,n=this.hi;for(;n!==0;){const o=31-Math.clz32(n);n^=1<<o,yield 32+o}for(;e!==0;){const o=31-Math.clz32(e);e^=1<<o,yield o}}}const Vt=(t,e)=>{let n=k.empty();for(const o of e){const a=t+o;0<=a&&a<64&&Math.abs(Ee(t)-Ee(a))<=2&&(n=n.with(a))}return n},Ue=t=>{const e=[];for(let n=0;n<64;n++)e[n]=t(n);return e},Mo=Ue(t=>Vt(t,[-9,-8,-7,-1,1,7,8,9])),xo=Ue(t=>Vt(t,[-17,-15,-10,-6,6,10,15,17])),Do={white:Ue(t=>Vt(t,[7,9])),black:Ue(t=>Vt(t,[-7,-9]))},Gt=t=>Mo[t],Wt=t=>xo[t],bt=(t,e)=>Do[t][e],Er=Ue(t=>k.fromFile(Ee(t)).without(t)),yr=Ue(t=>k.fromRank(Ye(t)).without(t)),kr=Ue(t=>{const e=new k(134480385,2151686160),n=8*(Ye(t)-Ee(t));return(n>=0?e.shl64(n):e.shr64(-n)).without(t)}),vr=Ue(t=>{const e=new k(270549120,16909320),n=8*(Ye(t)+Ee(t)-7);return(n>=0?e.shl64(n):e.shr64(-n)).without(t)}),br=(t,e,n)=>{let o=n.intersect(e),a=o.bswap64();return o=o.minus64(t),a=a.minus64(t.bswap64()),o.xor(a.bswap64()).intersect(e)},Lo=(t,e)=>br(k.fromSquare(t),Er[t],e),Io=(t,e)=>{const n=yr[t];let o=e.intersect(n),a=o.rbit64();return o=o.minus64(k.fromSquare(t)),a=a.minus64(k.fromSquare(63-t)),o.xor(a.rbit64()).intersect(n)},st=(t,e)=>{const n=k.fromSquare(t);return br(n,kr[t],e).xor(br(n,vr[t],e))},at=(t,e)=>Lo(t,e).xor(Io(t,e)),Ar=(t,e)=>st(t,e).xor(at(t,e)),Or=(t,e)=>{const n=k.fromSquare(e);return yr[t].intersects(n)?yr[t].with(t):vr[t].intersects(n)?vr[t].with(t):kr[t].intersects(n)?kr[t].with(t):Er[t].intersects(n)?Er[t].with(t):k.empty()},Le=(t,e)=>Or(t,e).intersect(k.full().shl64(t).xor(k.full().shl64(e))).withoutFirst();class lt{occupied;promoted;white;black;pawn;knight;bishop;rook;queen;king;constructor(){}static default(){const e=new lt;return e.reset(),e}reset(){this.occupied=new k(65535,4294901760),this.promoted=k.empty(),this.white=new k(65535,0),this.black=new k(0,4294901760),this.pawn=new k(65280,16711680),this.knight=new k(66,1107296256),this.bishop=new k(36,603979776),this.rook=new k(129,2164260864),this.queen=new k(8,134217728),this.king=new k(16,268435456)}static empty(){const e=new lt;return e.clear(),e}clear(){this.occupied=k.empty(),this.promoted=k.empty();for(const e of We)this[e]=k.empty();for(const e of ve)this[e]=k.empty()}clone(){const e=new lt;e.occupied=this.occupied,e.promoted=this.promoted;for(const n of We)e[n]=this[n];for(const n of ve)e[n]=this[n];return e}getColor(e){if(this.white.has(e))return"white";if(this.black.has(e))return"black"}getRole(e){for(const n of ve)if(this[n].has(e))return n}get(e){const n=this.getColor(e);if(!n)return;const o=this.getRole(e),a=this.promoted.has(e);return{color:n,role:o,promoted:a}}take(e){const n=this.get(e);return n&&(this.occupied=this.occupied.without(e),this[n.color]=this[n.color].without(e),this[n.role]=this[n.role].without(e),n.promoted&&(this.promoted=this.promoted.without(e))),n}set(e,n){const o=this.take(e);return this.occupied=this.occupied.with(e),this[n.color]=this[n.color].with(e),this[n.role]=this[n.role].with(e),n.promoted&&(this.promoted=this.promoted.with(e)),o}has(e){return this.occupied.has(e)}*[Symbol.iterator](){for(const e of this.occupied)yield[e,this.get(e)]}pieces(e,n){return this[e].intersect(this[n])}rooksAndQueens(){return this.rook.union(this.queen)}bishopsAndQueens(){return this.bishop.union(this.queen)}kingOf(e){return this.pieces(e,"king").singleSquare()}}class Se{pawn;knight;bishop;rook;queen;king;constructor(){}static empty(){const e=new Se;for(const n of ve)e[n]=0;return e}static fromBoard(e,n){const o=new Se;for(const a of ve)o[a]=e.pieces(n,a).size();return o}clone(){const e=new Se;for(const n of ve)e[n]=this[n];return e}equals(e){return ve.every(n=>this[n]===e[n])}add(e){const n=new Se;for(const o of ve)n[o]=this[o]+e[o];return n}subtract(e){const n=new Se;for(const o of ve)n[o]=this[o]-e[o];return n}nonEmpty(){return ve.some(e=>this[e]>0)}isEmpty(){return!this.nonEmpty()}hasPawns(){return this.pawn>0}hasNonPawns(){return this.knight>0||this.bishop>0||this.rook>0||this.queen>0||this.king>0}size(){return this.pawn+this.knight+this.bishop+this.rook+this.queen+this.king}}class Ve{white;black;constructor(e,n){this.white=e,this.black=n}static empty(){return new Ve(Se.empty(),Se.empty())}static fromBoard(e){return new Ve(Se.fromBoard(e,"white"),Se.fromBoard(e,"black"))}clone(){return new Ve(this.white.clone(),this.black.clone())}equals(e){return this.white.equals(e.white)&&this.black.equals(e.black)}add(e){return new Ve(this.white.add(e.white),this.black.add(e.black))}subtract(e){return new Ve(this.white.subtract(e.white),this.black.subtract(e.black))}count(e){return this.white[e]+this.black[e]}size(){return this.white.size()+this.black.size()}isEmpty(){return this.white.isEmpty()&&this.black.isEmpty()}nonEmpty(){return!this.isEmpty()}hasPawns(){return this.white.hasPawns()||this.black.hasPawns()}hasNonPawns(){return this.white.hasNonPawns()||this.black.hasNonPawns()}}class At{white;black;constructor(e,n){this.white=e,this.black=n}static default(){return new At(3,3)}clone(){return new At(this.white,this.black)}equals(e){return this.white===e.white&&this.black===e.black}}class In{unwrap(e,n){const o=this._chain(a=>N.ok(e?e(a):a),a=>n?N.ok(n(a)):N.err(a));if(o.isErr)throw o.error;return o.value}map(e,n){return this._chain(o=>N.ok(e(o)),o=>N.err(n?n(o):o))}chain(e,n){return this._chain(e,n||(o=>N.err(o)))}}class Uo extends In{constructor(e){super(),this.value=void 0,this.isOk=!0,this.isErr=!1,this.value=e}_chain(e,n){return e(this.value)}}class Bo extends In{constructor(e){super(),this.error=void 0,this.isOk=!1,this.isErr=!0,this.error=e}_chain(e,n){return n(this.error)}}var N;(function(t){t.ok=function(e){return new Uo(e)},t.err=function(e){return new Bo(e||new Error)},t.all=function(e){if(Array.isArray(e)){const a=[];for(let c=0;c<e.length;c++){const h=e[c];if(h.isErr)return h;a.push(h.value)}return t.ok(a)}const n={},o=Object.keys(e);for(let a=0;a<o.length;a++){const c=e[o[a]];if(c.isErr)return c;n[o[a]]=c.value}return t.ok(n)}})(N||(N={}));class jo{capacity;cache;constructor(e){this.capacity=e,this.capacity=e,this.cache=new Map}get(e){if(!this.cache.has(e))return;const n=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,n),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.capacity){const o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(e,n)}}var xe;(function(t){t.Empty="ERR_EMPTY",t.OppositeCheck="ERR_OPPOSITE_CHECK",t.PawnsOnBackrank="ERR_PAWNS_ON_BACKRANK",t.Kings="ERR_KINGS",t.Variant="ERR_VARIANT"})(xe||(xe={}));class tt extends Error{}const zo=(t,e,n,o)=>n[e].intersect(at(t,o).intersect(n.rooksAndQueens()).union(st(t,o).intersect(n.bishopsAndQueens())).union(Wt(t).intersect(n.knight)).union(Gt(t).intersect(n.king)).union(bt(ae(e),t).intersect(n.pawn)));class Ge{castlingRights;rook;path;constructor(){}static default(){const e=new Ge;return e.castlingRights=k.corners(),e.rook={white:{a:0,h:7},black:{a:56,h:63}},e.path={white:{a:new k(14,0),h:new k(96,0)},black:{a:new k(0,234881024),h:new k(0,1610612736)}},e}static empty(){const e=new Ge;return e.castlingRights=k.empty(),e.rook={white:{a:void 0,h:void 0},black:{a:void 0,h:void 0}},e.path={white:{a:k.empty(),h:k.empty()},black:{a:k.empty(),h:k.empty()}},e}clone(){const e=new Ge;return e.castlingRights=this.castlingRights,e.rook={white:{a:this.rook.white.a,h:this.rook.white.h},black:{a:this.rook.black.a,h:this.rook.black.h}},e.path={white:{a:this.path.white.a,h:this.path.white.h},black:{a:this.path.black.a,h:this.path.black.h}},e}add(e,n,o,a){const c=Nr(e,n),h=Mr(e,n);this.castlingRights=this.castlingRights.with(a),this.rook[e][n]=a,this.path[e][n]=Le(a,h).with(h).union(Le(o,c).with(c)).without(o).without(a)}static fromSetup(e){const n=Ge.empty(),o=e.castlingRights.intersect(e.board.rook);for(const a of We){const c=k.backrank(a),h=e.board.kingOf(a);if(!C(h)||!c.has(h))continue;const f=o.intersect(e.board[a]).intersect(c),p=f.first();C(p)&&p<h&&n.add(a,"a",h,p);const g=f.last();C(g)&&h<g&&n.add(a,"h",h,g)}return n}discardRook(e){if(this.castlingRights.has(e)){this.castlingRights=this.castlingRights.without(e);for(const n of We)for(const o of Co)this.rook[n][o]===e&&(this.rook[n][o]=void 0)}}discardColor(e){this.castlingRights=this.castlingRights.diff(k.backrank(e)),this.rook[e].a=void 0,this.rook[e].h=void 0}}class $o{rules;board;pockets;turn;castles;epSquare;remainingChecks;halfmoves;fullmoves;constructor(e){this.rules=e}reset(){this.board=lt.default(),this.pockets=void 0,this.turn="white",this.castles=Ge.default(),this.epSquare=void 0,this.remainingChecks=void 0,this.halfmoves=0,this.fullmoves=1}setupUnchecked(e){this.board=e.board.clone(),this.board.promoted=k.empty(),this.pockets=void 0,this.turn=e.turn,this.castles=Ge.fromSetup(e),this.epSquare=Ho(this,e.epSquare),this.remainingChecks=void 0,this.halfmoves=e.halfmoves,this.fullmoves=e.fullmoves}kingAttackers(e,n,o){return zo(e,n,this.board,o)}playCaptureAt(e,n){this.halfmoves=0,n.role==="rook"&&this.castles.discardRook(e),this.pockets&&this.pockets[ae(n.color)][n.promoted?"pawn":n.role]++}ctx(){const e=this.isVariantEnd(),n=this.board.kingOf(this.turn);if(!C(n))return{king:n,blockers:k.empty(),checkers:k.empty(),variantEnd:e,mustCapture:!1};const o=at(n,k.empty()).intersect(this.board.rooksAndQueens()).union(st(n,k.empty()).intersect(this.board.bishopsAndQueens())).intersect(this.board[ae(this.turn)]);let a=k.empty();for(const h of o){const f=Le(n,h).intersect(this.board.occupied);f.moreThanOne()||(a=a.union(f))}const c=this.kingAttackers(n,ae(this.turn),this.board.occupied);return{king:n,blockers:a,checkers:c,variantEnd:e,mustCapture:!1}}clone(){const e=new this.constructor;return e.board=this.board.clone(),e.pockets=this.pockets?.clone(),e.turn=this.turn,e.castles=this.castles.clone(),e.epSquare=this.epSquare,e.remainingChecks=this.remainingChecks?.clone(),e.halfmoves=this.halfmoves,e.fullmoves=this.fullmoves,e}validate(){if(this.board.occupied.isEmpty())return N.err(new tt(xe.Empty));if(this.board.king.size()!==2)return N.err(new tt(xe.Kings));if(!C(this.board.kingOf(this.turn)))return N.err(new tt(xe.Kings));const e=this.board.kingOf(ae(this.turn));return C(e)?this.kingAttackers(e,this.turn,this.board.occupied).nonEmpty()?N.err(new tt(xe.OppositeCheck)):k.backranks().intersects(this.board.pawn)?N.err(new tt(xe.PawnsOnBackrank)):N.ok(void 0):N.err(new tt(xe.Kings))}dropDests(e){return k.empty()}c_cache=new jo(64);dests(e,n){let o=this.c_cache.get(e+"");if(o)return o;if(n=n||this.ctx(),n.variantEnd)return k.empty();const a=this.board.get(e);if(!a||a.color!==this.turn)return k.empty();let c,h;if(a.role==="pawn"){c=bt(this.turn,e).intersect(this.board[ae(this.turn)]);const f=this.turn==="white"?8:-8,p=e+f;if(0<=p&&p<64&&!this.board.occupied.has(p)){c=c.with(p);const g=this.turn==="white"?e<16:e>=48,w=p+f;g&&!this.board.occupied.has(w)&&(c=c.with(w))}C(this.epSquare)&&hn(this,e,n)&&(h=k.fromSquare(this.epSquare))}else a.role==="bishop"?c=st(e,this.board.occupied):a.role==="knight"?c=Wt(e):a.role==="rook"?c=at(e,this.board.occupied):a.role==="queen"?c=Ar(e,this.board.occupied):c=Gt(e);if(c=c.diff(this.board[this.turn]),C(n.king)){if(a.role==="king"){const f=this.board.occupied.without(e);for(const p of c)this.kingAttackers(p,ae(this.turn),f).nonEmpty()&&(c=c.without(p));return c.union(Mt(this,"a",n)).union(Mt(this,"h",n))}if(n.checkers.nonEmpty()){const f=n.checkers.singleSquare();if(!C(f))return k.empty();c=c.intersect(Le(f,n.king).with(f))}n.blockers.has(e)&&(c=c.intersect(Or(e,n.king)))}return h&&(c=c.union(h)),this.c_cache.put(e+"",c),c}pseudo_dests(e,n){if(n=n||this.ctx(),n.variantEnd)return k.empty();const o=this.board.get(e);if(!o||o.color!==this.turn)return k.empty();let a,c;if(o.role==="pawn"){a=bt(this.turn,e);const h=this.turn==="white"?8:-8,f=e+h;if(0<=f&&f<64&&!this.board.occupied.has(f)){a=a.with(f);const p=this.turn==="white"?e<16:e>=48,g=f+h;p&&!this.board.occupied.has(g)&&(a=a.with(g))}C(this.epSquare)&&hn(this,e,n)&&(c=k.fromSquare(this.epSquare))}else o.role==="bishop"?a=st(e,this.board.occupied):o.role==="knight"?a=Wt(e):o.role==="rook"?a=at(e,this.board.occupied):o.role==="queen"?a=Ar(e,this.board.occupied):a=Gt(e);if(C(n.king)){if(o.role==="king"){this.board.occupied.without(e);for(const h of a);return a.union(Mt(this,"a",n)).union(Mt(this,"h",n))}if(n.checkers.nonEmpty()){const h=n.checkers.singleSquare();if(!C(h))return k.empty();a=a.intersect(Le(h,n.king).with(h))}n.blockers.has(e)&&(a=a.intersect(Or(e,n.king)))}return c&&(a=a.union(c)),a}isVariantEnd(){return!1}variantOutcome(e){}hasInsufficientMaterial(e){return this.board[e].intersect(this.board.pawn.union(this.board.rooksAndQueens())).nonEmpty()?!1:this.board[e].intersects(this.board.knight)?this.board[e].size()<=2&&this.board[ae(e)].diff(this.board.king).diff(this.board.queen).isEmpty():this.board[e].intersects(this.board.bishop)?(!this.board.bishop.intersects(k.darkSquares())||!this.board.bishop.intersects(k.lightSquares()))&&this.board.pawn.isEmpty()&&this.board.knight.isEmpty():!0}toSetup(){return{board:this.board.clone(),pockets:this.pockets?.clone(),turn:this.turn,castlingRights:this.castles.castlingRights,epSquare:Ko(this),remainingChecks:this.remainingChecks?.clone(),halfmoves:Math.min(this.halfmoves,150),fullmoves:Math.min(Math.max(this.fullmoves,1),9999)}}isInsufficientMaterial(){return We.every(e=>this.hasInsufficientMaterial(e))}hasDests(e){e=e||this.ctx();for(const n of this.board[this.turn])if(this.dests(n,e).nonEmpty())return!0;return this.dropDests(e).nonEmpty()}isLegal(e,n){{if(e.promotion==="pawn"||e.promotion==="king"&&this.rules!=="antichess"||!!e.promotion!==(this.board.pawn.has(e.from)&&k.backranks().has(e.to)))return!1;const o=this.dests(e.from,n);return o.has(e.to)||o.has(Vo(this,e).to)}}isCheck(){const e=this.board.kingOf(this.turn);return C(e)&&this.kingAttackers(e,ae(this.turn),this.board.occupied).nonEmpty()}isEnd(e){return(e?e.variantEnd:this.isVariantEnd())?!0:this.isInsufficientMaterial()||!this.hasDests(e)}isCheckmate(e){return e=e||this.ctx(),!e.variantEnd&&e.checkers.nonEmpty()&&!this.hasDests(e)}isStalemate(e){return e=e||this.ctx(),!e.variantEnd&&e.checkers.isEmpty()&&!this.hasDests(e)}outcome(e){const n=this.variantOutcome(e);return n||(e=e||this.ctx(),this.isCheckmate(e)?{winner:ae(this.turn)}:this.isInsufficientMaterial()||this.isStalemate(e)?{winner:void 0}:void 0)}allDests(e){e=e||this.ctx();const n=new Map;if(e.variantEnd)return n;for(const o of this.board[this.turn])n.set(o,this.dests(o,e));return n}play(e){const n=this.turn,o=this.epSquare,a=Un(this,e);this.epSquare=void 0,this.halfmoves+=1,n==="black"&&(this.fullmoves+=1),this.turn=ae(n);{const c=this.board.take(e.from);if(!c)return;let h;if(c.role==="pawn"){this.halfmoves=0,e.to===o&&(h=this.board.take(e.to+(n==="white"?-8:8)));const f=e.from-e.to;Math.abs(f)===16&&8<=e.from&&e.from<=55&&(this.epSquare=e.from+e.to>>1),e.promotion&&(c.role=e.promotion,c.promoted=!!this.pockets)}else if(c.role==="rook")this.castles.discardRook(e.from);else if(c.role==="king"){if(a){const f=this.castles.rook[n][a];if(C(f)){const p=this.board.take(f);this.board.set(Nr(n,a),c),p&&this.board.set(Mr(n,a),p)}}this.castles.discardColor(n)}if(!a){const f=this.board.set(e.to,c)||h;f&&this.playCaptureAt(e.to,f)}}this.remainingChecks&&this.isCheck()&&(this.remainingChecks[n]=Math.max(this.remainingChecks[n]-1,0))}}class Ot extends $o{constructor(){super("chess")}static default(){const e=new this;return e.reset(),e}static fromSetup(e){const n=new this;return n.setupUnchecked(e),n.validate().map(o=>n)}static fromSetupUnchecked(e){const n=new this;return n.setupUnchecked(e),n}clone(){return super.clone()}}const Ho=(t,e)=>{if(!C(e))return;const n=t.turn==="white"?5:2,o=t.turn==="white"?8:-8;if(Ye(e)!==n||t.board.occupied.has(e+o))return;const a=e-o;if(!(!t.board.pawn.has(a)||!t.board[ae(t.turn)].has(a)))return e},Ko=t=>{if(!C(t.epSquare))return;const e=t.ctx(),o=t.board.pieces(t.turn,"pawn").intersect(bt(ae(t.turn),t.epSquare));for(const a of o)if(t.dests(a,e).has(t.epSquare))return t.epSquare},hn=(t,e,n)=>{if(!C(t.epSquare)||!bt(t.turn,e).has(t.epSquare))return!1;if(!C(n.king))return!0;const o=t.turn==="white"?8:-8,a=t.epSquare-o;return t.kingAttackers(n.king,ae(t.turn),t.board.occupied.toggle(e).toggle(a).with(t.epSquare)).without(a).isEmpty()},Mt=(t,e,n)=>{if(!C(n.king)||n.checkers.nonEmpty())return k.empty();const o=t.castles.rook[t.turn][e];if(!C(o)||t.castles.path[t.turn][e].intersects(t.board.occupied))return k.empty();const a=Nr(t.turn,e),c=Le(n.king,a),h=t.board.occupied.without(n.king);for(const g of c)if(t.kingAttackers(g,ae(t.turn),h).nonEmpty())return k.empty();const f=Mr(t.turn,e),p=t.board.occupied.toggle(n.king).toggle(o).toggle(f);return t.kingAttackers(a,ae(t.turn),p).nonEmpty()?k.empty():k.fromSquare(o)},Un=(t,e)=>{const n=e.to-e.from;if(!(Math.abs(n)!==2&&!t.board[t.turn].has(e.to))&&t.board.king.has(e.from))return n>0?"h":"a"},Vo=(t,e)=>{const n=Un(t,e);if(!n)return e;const o=t.castles.rook[t.turn][n];return{from:e.from,to:C(o)?o:e.to}},Go="8/8/8/8/8/8/8/8",Wo=Go+" w - -",Yo=Wo+" 0 1";var oe;(function(t){t.Fen="ERR_FEN",t.Board="ERR_BOARD",t.Pockets="ERR_POCKETS",t.Turn="ERR_TURN",t.Castling="ERR_CASTLING",t.EpSquare="ERR_EP_SQUARE",t.RemainingChecks="ERR_REMAINING_CHECKS",t.Halfmoves="ERR_HALFMOVES",t.Fullmoves="ERR_FULLMOVES"})(oe||(oe={}));class fe extends Error{}const qo=(t,e,n)=>{let o=t.indexOf(e);for(;n-- >0&&o!==-1;)o=t.indexOf(e,o+e.length);return o},nt=t=>/^\d{1,4}$/.test(t)?parseInt(t,10):void 0,Bn=t=>{const e=Fo(t);return e&&{role:e,color:t.toLowerCase()===t?"black":"white"}},ur=t=>{const e=lt.empty();let n=7,o=0;for(let a=0;a<t.length;a++){const c=t[a];if(c==="/"&&o===8)o=0,n--;else{const h=parseInt(c,10);if(h>0)o+=h;else{if(o>=8||n<0)return N.err(new fe(oe.Board));const f=o+n*8,p=Bn(c);if(!p)return N.err(new fe(oe.Board));t[a+1]==="~"&&(p.promoted=!0,a++),e.set(f,p),o++}}}return n!==0||o!==8?N.err(new fe(oe.Board)):N.ok(e)},dn=t=>{if(t.length>64)return N.err(new fe(oe.Pockets));const e=Ve.empty();for(const n of t){const o=Bn(n);if(!o)return N.err(new fe(oe.Pockets));e[o.color][o.role]++}return N.ok(e)},Xo=(t,e)=>{let n=k.empty();if(e==="-")return N.ok(n);for(const o of e){const a=o.toLowerCase(),c=o===a?"black":"white",h=c==="white"?0:7;if("a"<=a&&a<="h")n=n.with(gr(a.charCodeAt(0)-97,h));else if(a==="k"||a==="q"){const f=t[c].intersect(k.backrank(c)).intersect(t.rook.union(t.king)),p=a==="k"?f.last():f.first();n=n.with(C(p)&&t.rook.has(p)?p:gr(a==="k"?7:0,h))}else return N.err(new fe(oe.Castling))}return We.some(o=>k.backrank(o).intersect(n).size()>2)?N.err(new fe(oe.Castling)):N.ok(n)},pn=t=>{const e=t.split("+");if(e.length===3&&e[0]===""){const n=nt(e[1]),o=nt(e[2]);return!C(n)||n>3||!C(o)||o>3?N.err(new fe(oe.RemainingChecks)):N.ok(new At(3-n,3-o))}else if(e.length===2){const n=nt(e[0]),o=nt(e[1]);return!C(n)||n>3||!C(o)||o>3?N.err(new fe(oe.RemainingChecks)):N.ok(new At(n,o))}else return N.err(new fe(oe.RemainingChecks))},St=t=>{const e=t.split(/[\s_]+/),n=e.shift();let o,a=N.ok(void 0);if(n.endsWith("]")){const f=n.indexOf("[");if(f===-1)return N.err(new fe(oe.Fen));o=ur(n.slice(0,f)),a=dn(n.slice(f+1,-1))}else{const f=qo(n,"/",7);f===-1?o=ur(n):(o=ur(n.slice(0,f)),a=dn(n.slice(f+1)))}let c;const h=e.shift();if(!C(h)||h==="w")c="white";else if(h==="b")c="black";else return N.err(new fe(oe.Turn));return o.chain(f=>{const p=e.shift(),g=C(p)?Xo(f,p):N.ok(k.empty()),w=e.shift();let E;if(C(w)&&w!=="-"&&(E=No(w),!C(E)))return N.err(new fe(oe.EpSquare));let O=e.shift(),T;C(O)&&O.includes("+")&&(T=pn(O),O=e.shift());const S=C(O)?nt(O):0;if(!C(S))return N.err(new fe(oe.Halfmoves));const M=e.shift(),x=C(M)?nt(M):1;if(!C(x))return N.err(new fe(oe.Fullmoves));const z=e.shift();let K=N.ok(void 0);if(C(z)){if(C(T))return N.err(new fe(oe.RemainingChecks));K=pn(z)}else C(T)&&(K=T);return e.length>0?N.err(new fe(oe.Fen)):a.chain(ee=>g.chain(W=>K.map(v=>({board:f,pockets:ee,turn:c,castlingRights:W,remainingChecks:v,epSquare:E,halfmoves:S,fullmoves:Math.max(1,x)}))))})},Qo=t=>{let e=Kt(t.role);return t.color==="white"&&(e=e.toUpperCase()),t.promoted&&(e+="~"),e},Zo=t=>{let e="",n=0;for(let o=7;o>=0;o--)for(let a=0;a<8;a++){const c=a+o*8,h=t.get(c);h?(n>0&&(e+=n,n=0),e+=Qo(h)):n++,a===7&&(n>0&&(e+=n,n=0),o!==0&&(e+="/"))}return e},mn=t=>ve.map(e=>Kt(e).repeat(t[e])).join(""),Jo=t=>mn(t.white).toUpperCase()+mn(t.black),es=(t,e)=>{let n="";for(const o of We){const a=k.backrank(o);let c=t.kingOf(o);C(c)&&!a.has(c)&&(c=void 0);const h=t.pieces(o,"rook").intersect(a);for(const f of e.intersect(a).reversed())if(f===h.first()&&C(c)&&f<c)n+=o==="white"?"Q":"q";else if(f===h.last()&&C(c)&&c<f)n+=o==="white"?"K":"k";else{const p=Ht[Ee(f)];n+=o==="white"?p.toUpperCase():p}}return n||"-"},ts=t=>`${t.white}+${t.black}`,rs=(t,e)=>[Zo(t.board)+(t.pockets?`[${Jo(t.pockets)}]`:""),t.turn[0],es(t.board,t.castlingRights),C(t.epSquare)?Ln(t.epSquare):"-",...t.remainingChecks?[ts(t.remainingChecks)]:[],Math.max(0,Math.min(t.halfmoves,9999)),Math.max(1,Math.min(t.fullmoves,9999))].join(" "),ns=(t,e)=>{let n="";{const o=t.board.getRole(e.from);if(!o)return"--";if(o==="king"&&(t.board[t.turn].has(e.to)||Math.abs(e.to-e.from)===2))n=e.to>e.from?"O-O":"O-O-O";else{const a=t.board.occupied.has(e.to)||o==="pawn"&&Ee(e.from)!==Ee(e.to);if(o!=="pawn"){n=Kt(o).toUpperCase();let c;if(o==="king"?c=Gt(e.to).intersect(t.board.king):o==="queen"?c=Ar(e.to,t.board.occupied).intersect(t.board.queen):o==="rook"?c=at(e.to,t.board.occupied).intersect(t.board.rook):o==="bishop"?c=st(e.to,t.board.occupied).intersect(t.board.bishop):c=Wt(e.to).intersect(t.board.knight),c=c.intersect(t.board[t.turn]).without(e.from),c.nonEmpty()){const h=t.ctx();for(const f of c)t.dests(f,h).has(e.to)||(c=c.without(f));if(c.nonEmpty()){let f=!1,p=c.intersects(k.fromRank(Ye(e.from)));c.intersects(k.fromFile(Ee(e.from)))?f=!0:p=!0,p&&(n+=Ht[Ee(e.from)]),f&&(n+=Dn[Ye(e.from)])}}}else a&&(n=Ht[Ee(e.from)]);a&&(n+="x"),n+=Ln(e.to),e.promotion&&(n+="="+Kt(e.promotion).toUpperCase())}}return n},is=(t,e)=>{const n=ns(t,e);return t.play(e),t.outcome()?.winner?n+"#":t.isCheck()?n+"+":n},Sr=(t,e)=>is(t.clone(),e);var os=(()=>{var t=import.meta.url;return async function(e={}){var n,o=e,a,c,h=new Promise((r,i)=>{a=r,c=i});["_get_attacks","_get_occupied","_get_pieces_color_bb","_get_fen","_get_pieces_bb","_get_turn","_is_checkmate","_pos_attacks_to","_pos_attacks","_get_at","_create_position","_delete_position","_make_move","_unmake_move","_get_legal_moves","_free_legal_moves","_init","_malloc","_free","setValue","getValue","stringToUTF8","UTF8ToString","_memory","___indirect_function_table","onRuntimeInitialized"].forEach(r=>{Object.getOwnPropertyDescriptor(h,r)||Object.defineProperty(h,r,{get:()=>te("You are getting "+r+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>te("You are setting "+r+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})});var f=typeof window=="object",p=typeof WorkerGlobalScope<"u",g=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer",w=!f&&!g&&!p;if(g){const{createRequire:r}=await Pn(async()=>{const{createRequire:s}=await Promise.resolve().then(()=>Zs);return{createRequire:s}},void 0,import.meta.url);let i=import.meta.url;i.startsWith("data:")&&(i="/");var E=r(i)}var O=Object.assign({},o),T="./this.program",S="";function M(r){return o.locateFile?o.locateFile(r,S):S+r}var x,z;if(g){if(typeof process>"u"||!process.release||process.release.name!=="node")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var K=process.versions.node,ee=K.split(".").slice(0,3);if(ee=ee[0]*1e4+ee[1]*100+ee[2].split("-")[0]*1,ee<16e4)throw new Error("This emscripten-generated code requires node v16.0.0 (detected v"+K+")");var W=E("fs"),v=E("path");import.meta.url.startsWith("data:")||(S=v.dirname(E("url").fileURLToPath(import.meta.url))+"/"),z=r=>{r=ft(r)?new URL(r):v.normalize(r);var i=W.readFileSync(r);return b(i.buffer),i},x=(r,i=!0)=>(r=ft(r)?new URL(r):v.normalize(r),new Promise((s,u)=>{W.readFile(r,i?void 0:"utf8",(d,m)=>{d?u(d):s(i?m.buffer:m)})})),!o.thisProgram&&process.argv.length>1&&(T=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else if(w){if(typeof process=="object"&&typeof E=="function"||typeof window=="object"||typeof WorkerGlobalScope<"u")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)")}else if(f||p){if(p?S=self.location.href:typeof document<"u"&&document.currentScript&&(S=document.currentScript.src),t&&(S=t),S.startsWith("blob:")?S="":S=S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1),!(typeof window=="object"||typeof WorkerGlobalScope<"u"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");p&&(z=r=>{var i=new XMLHttpRequest;return i.open("GET",r,!1),i.responseType="arraybuffer",i.send(null),new Uint8Array(i.response)}),x=r=>ft(r)?new Promise((i,s)=>{var u=new XMLHttpRequest;u.open("GET",r,!0),u.responseType="arraybuffer",u.onload=()=>{if(u.status==200||u.status==0&&u.response){i(u.response);return}s(u.status)},u.onerror=s,u.send(null)}):fetch(r,{credentials:"same-origin"}).then(i=>i.ok?i.arrayBuffer():Promise.reject(new Error(i.status+" : "+i.url)))}else throw new Error("environment detection error");var Q=o.print||console.log.bind(console),D=o.printErr||console.error.bind(console);Object.assign(o,O),O=null,Gi(),o.arguments&&o.arguments,ze("arguments","arguments_"),o.thisProgram&&(T=o.thisProgram),ze("thisProgram","thisProgram"),b(typeof o.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),b(typeof o.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),b(typeof o.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),b(typeof o.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),b(typeof o.read>"u","Module.read option was removed"),b(typeof o.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),b(typeof o.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),b(typeof o.setWindowTitle>"u","Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),b(typeof o.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),ze("asm","wasmExports"),ze("readAsync","readAsync"),ze("readBinary","readBinary"),ze("setWindowTitle","setWindowTitle"),b(!w,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable.");var ne=o.wasmBinary;ze("wasmBinary","wasmBinary"),typeof WebAssembly!="object"&&D("no native wasm support detected");var le,Z=!1;function b(r,i){r||te("Assertion failed"+(i?": "+i:""))}var Y,ie,Ce,re,V,Qt,Zt;function Ir(){var r=le.buffer;o.HEAP8=Y=new Int8Array(r),o.HEAP16=Ce=new Int16Array(r),o.HEAPU8=ie=new Uint8Array(r),o.HEAPU16=new Uint16Array(r),o.HEAP32=re=new Int32Array(r),o.HEAPU32=V=new Uint32Array(r),o.HEAPF32=Qt=new Float32Array(r),o.HEAPF64=Zt=new Float64Array(r)}b(!o.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),b(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support"),b(!o.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),b(!o.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");function Jn(){var r=sr();b((r&3)==0),r==0&&(r+=4),V[r>>2]=34821223,V[r+4>>2]=2310721022,V[0]=1668509029}function Jt(){if(!Z){var r=sr();r==0&&(r+=4);var i=V[r>>2],s=V[r+4>>2];(i!=34821223||s!=2310721022)&&te(`Stack overflow! Stack cookie has been overwritten at ${dt(r)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${dt(s)} ${dt(i)}`),V[0]!=1668509029&&te("Runtime error: The application has corrupted its heap memory area (address zero)!")}}var Ur=[],Br=[],jr=[],Rt=!1;function ei(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)ni(o.preRun.shift());tr(Ur)}function ti(){b(!Rt),Rt=!0,Jt(),!o.noFSInit&&!l.initialized&&l.init(),l.ignorePermissions=!1,tr(Br)}function ri(){if(Jt(),o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)oi(o.postRun.shift());tr(jr)}function ni(r){Ur.unshift(r)}function ii(r){Br.unshift(r)}function oi(r){jr.unshift(r)}b(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),b(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),b(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),b(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var Be=0,je=null,ut=null,Xe={};function zr(r){for(var i=r;;){if(!Xe[r])return r;r=i+Math.random()}}function er(r){Be++,o.monitorRunDependencies?.(Be),r?(b(!Xe[r]),Xe[r]=1,je===null&&typeof setInterval<"u"&&(je=setInterval(()=>{if(Z){clearInterval(je),je=null;return}var i=!1;for(var s in Xe)i||(i=!0,D("still waiting on run dependencies:")),D(`dependency: ${s}`);i&&D("(end of list)")},1e4))):D("warning: run dependency added without ID")}function Pt(r){if(Be--,o.monitorRunDependencies?.(Be),r?(b(Xe[r]),delete Xe[r]):D("warning: run dependency removed without ID"),Be==0&&(je!==null&&(clearInterval(je),je=null),ut)){var i=ut;ut=null,i()}}function te(r){o.onAbort?.(r),r="Aborted("+r+")",D(r),Z=!0;var i=new WebAssembly.RuntimeError(r);throw c(i),i}var si="data:application/octet-stream;base64,",$r=r=>r.startsWith(si),ft=r=>r.startsWith("file://");function J(r,i){return(...s)=>{b(Rt,`native function \`${r}\` called before runtime initialization`);var u=Ke[r];return b(u,`exported native function \`${r}\` not found`),b(s.length<=i,`native function \`${r}\` called with ${s.length} args but expects ${i}`),u(...s)}}function ai(){if(o.locateFile){var r="hopefox.wasm";return $r(r)?r:M(r)}return new URL("hopefox.wasm",import.meta.url).href}var ht;function Hr(r){if(r==ht&&ne)return new Uint8Array(ne);if(z)return z(r);throw"both async and sync fetching of the wasm failed"}function li(r){return ne?Promise.resolve().then(()=>Hr(r)):x(r).then(i=>new Uint8Array(i),()=>Hr(r))}function Kr(r,i,s){return li(r).then(u=>WebAssembly.instantiate(u,i)).then(s,u=>{D(`failed to asynchronously prepare wasm: ${u}`),ft(ht)&&D(`warning: Loading from a file URI (${ht}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),te(u)})}function ci(r,i,s,u){return!r&&typeof WebAssembly.instantiateStreaming=="function"&&!$r(i)&&!ft(i)&&!g&&typeof fetch=="function"?fetch(i,{credentials:"same-origin"}).then(d=>{var m=WebAssembly.instantiateStreaming(d,s);return m.then(u,function(_){return D(`wasm streaming compile failed: ${_}`),D("falling back to ArrayBuffer instantiation"),Kr(i,s,u)})}):Kr(i,s,u)}function ui(){return{env:en,wasi_snapshot_preview1:en}}function fi(){function r(d,m){return Ke=d.exports,le=Ke.memory,b(le,"memory not found in wasm exports"),Ir(),ii(Ke.__wasm_call_ctors),Pt("wasm-instantiate"),Ke}er("wasm-instantiate");var i=o;function s(d){b(o===i,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),i=null,r(d.instance)}var u=ui();if(o.instantiateWasm)try{return o.instantiateWasm(u,r)}catch(d){D(`Module.instantiateWasm callback failed with error: ${d}`),c(d)}return ht??=ai(),ci(ne,ht,u,s).catch(c),{}}var I,se;if((()=>{var r=new Int16Array(1),i=new Int8Array(r.buffer);if(r[0]=25459,i[0]!==115||i[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})(),o.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");function ze(r,i,s=!0){Object.getOwnPropertyDescriptor(o,r)||Object.defineProperty(o,r,{configurable:!0,get(){let u=s?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":"";te(`\`Module.${r}\` has been replaced by \`${i}\``+u)}})}function hi(r){Object.getOwnPropertyDescriptor(o,r)&&te(`\`Module.${r}\` was supplied but \`${r}\` not included in INCOMING_MODULE_JS_API`)}function Vr(r){return r==="FS_createPath"||r==="FS_createDataFile"||r==="FS_createPreloadedFile"||r==="FS_unlink"||r==="addRunDependency"||r==="FS_createLazyFile"||r==="FS_createDevice"||r==="removeRunDependency"}function Gr(r,i){typeof globalThis<"u"&&!Object.getOwnPropertyDescriptor(globalThis,r)&&Object.defineProperty(globalThis,r,{configurable:!0,get(){i()}})}function Wr(r,i){Gr(r,()=>{$e(`\`${r}\` is not longer defined by emscripten. ${i}`)})}Wr("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),Wr("asm","Please use wasmExports instead");function di(r){Gr(r,()=>{var i=`\`${r}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,s=r;s.startsWith("_")||(s="$"+r),i+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${s}')`,Vr(r)&&(i+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),$e(i)}),Yr(r)}function Yr(r){Object.getOwnPropertyDescriptor(o,r)||Object.defineProperty(o,r,{configurable:!0,get(){var i=`'${r}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;Vr(r)&&(i+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),te(i)}})}var tr=r=>{for(;r.length>0;)r.shift()(o)};function pi(r,i="i8"){switch(i.endsWith("*")&&(i="*"),i){case"i1":return Y[r];case"i8":return Y[r];case"i16":return Ce[r>>1];case"i32":return re[r>>2];case"i64":te("to do getValue(i64) use WASM_BIGINT");case"float":return Qt[r>>2];case"double":return Zt[r>>3];case"*":return V[r>>2];default:te(`invalid type for getValue: ${i}`)}}o.getValue=pi,o.noExitRuntime;var dt=r=>(b(typeof r=="number"),r>>>=0,"0x"+r.toString(16).padStart(8,"0"));function mi(r,i,s="i8"){switch(s.endsWith("*")&&(s="*"),s){case"i1":Y[r]=i;break;case"i8":Y[r]=i;break;case"i16":Ce[r>>1]=i;break;case"i32":re[r>>2]=i;break;case"i64":te("to do setValue(i64) use WASM_BIGINT");case"float":Qt[r>>2]=i;break;case"double":Zt[r>>3]=i;break;case"*":V[r>>2]=i;break;default:te(`invalid type for setValue: ${s}`)}}o.setValue=mi;var $e=r=>{$e.shown||={},$e.shown[r]||($e.shown[r]=1,g&&(r="warning: "+r),D(r))},qr=typeof TextDecoder<"u"?new TextDecoder:void 0,Qe=(r,i=0,s=NaN)=>{for(var u=i+s,d=i;r[d]&&!(d>=u);)++d;if(d-i>16&&r.buffer&&qr)return qr.decode(r.subarray(i,d));for(var m="";i<d;){var _=r[i++];if(!(_&128)){m+=String.fromCharCode(_);continue}var y=r[i++]&63;if((_&224)==192){m+=String.fromCharCode((_&31)<<6|y);continue}var A=r[i++]&63;if((_&240)==224?_=(_&15)<<12|y<<6|A:((_&248)!=240&&$e("Invalid UTF-8 leading byte "+dt(_)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),_=(_&7)<<18|y<<12|A<<6|r[i++]&63),_<65536)m+=String.fromCharCode(_);else{var B=_-65536;m+=String.fromCharCode(55296|B>>10,56320|B&1023)}}return m},Ze=(r,i)=>(b(typeof r=="number",`UTF8ToString expects a number (got ${typeof r})`),r?Qe(ie,r,i):"");o.UTF8ToString=Ze;var wi=(r,i,s,u)=>te(`Assertion failed: ${Ze(r)}, at: `+[i?Ze(i):"unknown filename",s,u?Ze(u):"unknown function"]);class gi{constructor(i){this.excPtr=i,this.ptr=i-24}set_type(i){V[this.ptr+4>>2]=i}get_type(){return V[this.ptr+4>>2]}set_destructor(i){V[this.ptr+8>>2]=i}get_destructor(){return V[this.ptr+8>>2]}set_caught(i){i=i?1:0,Y[this.ptr+12]=i}get_caught(){return Y[this.ptr+12]!=0}set_rethrown(i){i=i?1:0,Y[this.ptr+13]=i}get_rethrown(){return Y[this.ptr+13]!=0}init(i,s){this.set_adjusted_ptr(0),this.set_type(i),this.set_destructor(s)}set_adjusted_ptr(i){V[this.ptr+16>>2]=i}get_adjusted_ptr(){return V[this.ptr+16>>2]}}var _i=(r,i,s)=>{var u=new gi(r);u.init(i,s),b(!1,"Exception thrown, but exception catching is not enabled. Compile with -sNO_DISABLE_EXCEPTION_CATCHING or -sEXCEPTION_CATCHING_ALLOWED=[..] to catch.")},Ei=()=>te("native code called abort()"),yi=(r,i,s)=>ie.copyWithin(r,i,i+s),rr=(r,i,s,u)=>{if(b(typeof r=="string",`stringToUTF8Array expects a string (got ${typeof r})`),!(u>0))return 0;for(var d=s,m=s+u-1,_=0;_<r.length;++_){var y=r.charCodeAt(_);if(y>=55296&&y<=57343){var A=r.charCodeAt(++_);y=65536+((y&1023)<<10)|A&1023}if(y<=127){if(s>=m)break;i[s++]=y}else if(y<=2047){if(s+1>=m)break;i[s++]=192|y>>6,i[s++]=128|y&63}else if(y<=65535){if(s+2>=m)break;i[s++]=224|y>>12,i[s++]=128|y>>6&63,i[s++]=128|y&63}else{if(s+3>=m)break;y>1114111&&$e("Invalid Unicode code point "+dt(y)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),i[s++]=240|y>>18,i[s++]=128|y>>12&63,i[s++]=128|y>>6&63,i[s++]=128|y&63}}return i[s]=0,s-d},pt=(r,i,s)=>(b(typeof s=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),rr(r,ie,i,s));o.stringToUTF8=pt;var Ct=r=>{for(var i=0,s=0;s<r.length;++s){var u=r.charCodeAt(s);u<=127?i++:u<=2047?i+=2:u>=55296&&u<=57343?(i+=4,++s):i+=3}return i},ki=(r,i,s,u)=>{var d=new Date().getFullYear(),m=new Date(d,0,1),_=new Date(d,6,1),y=m.getTimezoneOffset(),A=_.getTimezoneOffset(),B=Math.max(y,A);V[r>>2]=B*60,re[i>>2]=+(y!=A);var $=P=>{var U=P>=0?"-":"+",ce=Math.abs(P),ye=String(Math.floor(ce/60)).padStart(2,"0"),pe=String(ce%60).padStart(2,"0");return`UTC${U}${ye}${pe}`},H=$(y),j=$(A);b(H),b(j),b(Ct(H)<=16,`timezone name truncated to fit in TZNAME_MAX (${H})`),b(Ct(j)<=16,`timezone name truncated to fit in TZNAME_MAX (${j})`),A<y?(pt(H,s,17),pt(j,u,17)):(pt(H,u,17),pt(j,s,17))},vi=()=>2147483648,bi=(r,i)=>(b(i,"alignment argument is required"),Math.ceil(r/i)*i),Ai=r=>{var i=le.buffer,s=(r-i.byteLength+65535)/65536|0;try{return le.grow(s),Ir(),1}catch(u){D(`growMemory: Attempted to grow heap from ${i.byteLength} bytes to ${r} bytes, but got error: ${u}`)}},Oi=r=>{var i=ie.length;r>>>=0,b(r>i);var s=vi();if(r>s)return D(`Cannot enlarge memory, requested ${r} bytes, but the limit is ${s} bytes!`),!1;for(var u=1;u<=4;u*=2){var d=i*(1+.2/u);d=Math.min(d,r+100663296);var m=Math.min(s,bi(Math.max(r,d),65536)),_=Ai(m);if(_)return!0}return D(`Failed to grow the heap from ${i} bytes to ${m} bytes, not enough memory!`),!1},nr={},Si=()=>T||"./this.program",mt=()=>{if(!mt.strings){var r=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",i={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:r,_:Si()};for(var s in nr)nr[s]===void 0?delete i[s]:i[s]=nr[s];var u=[];for(var s in i)u.push(`${s}=${i[s]}`);mt.strings=u}return mt.strings},Ti=(r,i)=>{for(var s=0;s<r.length;++s)b(r.charCodeAt(s)===(r.charCodeAt(s)&255)),Y[i++]=r.charCodeAt(s);Y[i]=0},Ri=(r,i)=>{var s=0;return mt().forEach((u,d)=>{var m=i+s;V[r+d*4>>2]=m,Ti(u,m),s+=u.length+1}),0},Pi=(r,i)=>{var s=mt();V[r>>2]=s.length;var u=0;return s.forEach(d=>u+=d.length+1),V[i>>2]=u,0},q={isAbs:r=>r.charAt(0)==="/",splitPath:r=>{var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return i.exec(r).slice(1)},normalizeArray:(r,i)=>{for(var s=0,u=r.length-1;u>=0;u--){var d=r[u];d==="."?r.splice(u,1):d===".."?(r.splice(u,1),s++):s&&(r.splice(u,1),s--)}if(i)for(;s;s--)r.unshift("..");return r},normalize:r=>{var i=q.isAbs(r),s=r.substr(-1)==="/";return r=q.normalizeArray(r.split("/").filter(u=>!!u),!i).join("/"),!r&&!i&&(r="."),r&&s&&(r+="/"),(i?"/":"")+r},dirname:r=>{var i=q.splitPath(r),s=i[0],u=i[1];return!s&&!u?".":(u&&(u=u.substr(0,u.length-1)),s+u)},basename:r=>{if(r==="/")return"/";r=q.normalize(r),r=r.replace(/\/$/,"");var i=r.lastIndexOf("/");return i===-1?r:r.substr(i+1)},join:(...r)=>q.normalize(r.join("/")),join2:(r,i)=>q.normalize(r+"/"+i)},Ci=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return u=>crypto.getRandomValues(u);if(g)try{var r=E("crypto"),i=r.randomFillSync;if(i)return u=>r.randomFillSync(u);var s=r.randomBytes;return u=>(u.set(s(u.byteLength)),u)}catch{}te("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: (array) => { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")},Xr=r=>(Xr=Ci())(r),Me={resolve:(...r)=>{for(var i="",s=!1,u=r.length-1;u>=-1&&!s;u--){var d=u>=0?r[u]:l.cwd();if(typeof d!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!d)return"";i=d+"/"+i,s=q.isAbs(d)}return i=q.normalizeArray(i.split("/").filter(m=>!!m),!s).join("/"),(s?"/":"")+i||"."},relative:(r,i)=>{r=Me.resolve(r).substr(1),i=Me.resolve(i).substr(1);function s(B){for(var $=0;$<B.length&&B[$]==="";$++);for(var H=B.length-1;H>=0&&B[H]==="";H--);return $>H?[]:B.slice($,H-$+1)}for(var u=s(r.split("/")),d=s(i.split("/")),m=Math.min(u.length,d.length),_=m,y=0;y<m;y++)if(u[y]!==d[y]){_=y;break}for(var A=[],y=_;y<u.length;y++)A.push("..");return A=A.concat(d.slice(_)),A.join("/")}},ir=[];function Qr(r,i,s){var u=Ct(r)+1,d=new Array(u),m=rr(r,d,0,d.length);return d.length=m,d}var Fi=()=>{if(!ir.length){var r=null;if(g){var i=256,s=Buffer.alloc(i),u=0,d=process.stdin.fd;try{u=W.readSync(d,s,0,i)}catch(m){if(m.toString().includes("EOF"))u=0;else throw m}u>0&&(r=s.slice(0,u).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(r=window.prompt("Input: "),r!==null&&(r+=`
`));if(!r)return null;ir=Qr(r)}return ir.shift()},He={ttys:[],init(){},shutdown(){},register(r,i){He.ttys[r]={input:[],output:[],ops:i},l.registerDevice(r,He.stream_ops)},stream_ops:{open(r){var i=He.ttys[r.node.rdev];if(!i)throw new l.ErrnoError(43);r.tty=i,r.seekable=!1},close(r){r.tty.ops.fsync(r.tty)},fsync(r){r.tty.ops.fsync(r.tty)},read(r,i,s,u,d){if(!r.tty||!r.tty.ops.get_char)throw new l.ErrnoError(60);for(var m=0,_=0;_<u;_++){var y;try{y=r.tty.ops.get_char(r.tty)}catch{throw new l.ErrnoError(29)}if(y===void 0&&m===0)throw new l.ErrnoError(6);if(y==null)break;m++,i[s+_]=y}return m&&(r.node.timestamp=Date.now()),m},write(r,i,s,u,d){if(!r.tty||!r.tty.ops.put_char)throw new l.ErrnoError(60);try{for(var m=0;m<u;m++)r.tty.ops.put_char(r.tty,i[s+m])}catch{throw new l.ErrnoError(29)}return u&&(r.node.timestamp=Date.now()),m}},default_tty_ops:{get_char(r){return Fi()},put_char(r,i){i===null||i===10?(Q(Qe(r.output)),r.output=[]):i!=0&&r.output.push(i)},fsync(r){r.output&&r.output.length>0&&(Q(Qe(r.output)),r.output=[])},ioctl_tcgets(r){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(r,i,s){return 0},ioctl_tiocgwinsz(r){return[24,80]}},default_tty1_ops:{put_char(r,i){i===null||i===10?(D(Qe(r.output)),r.output=[]):i!=0&&r.output.push(i)},fsync(r){r.output&&r.output.length>0&&(D(Qe(r.output)),r.output=[])}}},Zr=r=>{te("internal error: mmapAlloc called but `emscripten_builtin_memalign` native symbol not exported")},F={ops_table:null,mount(r){return F.createNode(null,"/",16895,0)},createNode(r,i,s,u){if(l.isBlkdev(s)||l.isFIFO(s))throw new l.ErrnoError(63);F.ops_table||={dir:{node:{getattr:F.node_ops.getattr,setattr:F.node_ops.setattr,lookup:F.node_ops.lookup,mknod:F.node_ops.mknod,rename:F.node_ops.rename,unlink:F.node_ops.unlink,rmdir:F.node_ops.rmdir,readdir:F.node_ops.readdir,symlink:F.node_ops.symlink},stream:{llseek:F.stream_ops.llseek}},file:{node:{getattr:F.node_ops.getattr,setattr:F.node_ops.setattr},stream:{llseek:F.stream_ops.llseek,read:F.stream_ops.read,write:F.stream_ops.write,allocate:F.stream_ops.allocate,mmap:F.stream_ops.mmap,msync:F.stream_ops.msync}},link:{node:{getattr:F.node_ops.getattr,setattr:F.node_ops.setattr,readlink:F.node_ops.readlink},stream:{}},chrdev:{node:{getattr:F.node_ops.getattr,setattr:F.node_ops.setattr},stream:l.chrdev_stream_ops}};var d=l.createNode(r,i,s,u);return l.isDir(d.mode)?(d.node_ops=F.ops_table.dir.node,d.stream_ops=F.ops_table.dir.stream,d.contents={}):l.isFile(d.mode)?(d.node_ops=F.ops_table.file.node,d.stream_ops=F.ops_table.file.stream,d.usedBytes=0,d.contents=null):l.isLink(d.mode)?(d.node_ops=F.ops_table.link.node,d.stream_ops=F.ops_table.link.stream):l.isChrdev(d.mode)&&(d.node_ops=F.ops_table.chrdev.node,d.stream_ops=F.ops_table.chrdev.stream),d.timestamp=Date.now(),r&&(r.contents[i]=d,r.timestamp=d.timestamp),d},getFileDataAsTypedArray(r){return r.contents?r.contents.subarray?r.contents.subarray(0,r.usedBytes):new Uint8Array(r.contents):new Uint8Array(0)},expandFileStorage(r,i){var s=r.contents?r.contents.length:0;if(!(s>=i)){var u=1024*1024;i=Math.max(i,s*(s<u?2:1.125)>>>0),s!=0&&(i=Math.max(i,256));var d=r.contents;r.contents=new Uint8Array(i),r.usedBytes>0&&r.contents.set(d.subarray(0,r.usedBytes),0)}},resizeFileStorage(r,i){if(r.usedBytes!=i)if(i==0)r.contents=null,r.usedBytes=0;else{var s=r.contents;r.contents=new Uint8Array(i),s&&r.contents.set(s.subarray(0,Math.min(i,r.usedBytes))),r.usedBytes=i}},node_ops:{getattr(r){var i={};return i.dev=l.isChrdev(r.mode)?r.id:1,i.ino=r.id,i.mode=r.mode,i.nlink=1,i.uid=0,i.gid=0,i.rdev=r.rdev,l.isDir(r.mode)?i.size=4096:l.isFile(r.mode)?i.size=r.usedBytes:l.isLink(r.mode)?i.size=r.link.length:i.size=0,i.atime=new Date(r.timestamp),i.mtime=new Date(r.timestamp),i.ctime=new Date(r.timestamp),i.blksize=4096,i.blocks=Math.ceil(i.size/i.blksize),i},setattr(r,i){i.mode!==void 0&&(r.mode=i.mode),i.timestamp!==void 0&&(r.timestamp=i.timestamp),i.size!==void 0&&F.resizeFileStorage(r,i.size)},lookup(r,i){throw new l.ErrnoError(44)},mknod(r,i,s,u){return F.createNode(r,i,s,u)},rename(r,i,s){if(l.isDir(r.mode)){var u;try{u=l.lookupNode(i,s)}catch{}if(u)for(var d in u.contents)throw new l.ErrnoError(55)}delete r.parent.contents[r.name],r.parent.timestamp=Date.now(),r.name=s,i.contents[s]=r,i.timestamp=r.parent.timestamp},unlink(r,i){delete r.contents[i],r.timestamp=Date.now()},rmdir(r,i){var s=l.lookupNode(r,i);for(var u in s.contents)throw new l.ErrnoError(55);delete r.contents[i],r.timestamp=Date.now()},readdir(r){var i=[".",".."];for(var s of Object.keys(r.contents))i.push(s);return i},symlink(r,i,s){var u=F.createNode(r,i,41471,0);return u.link=s,u},readlink(r){if(!l.isLink(r.mode))throw new l.ErrnoError(28);return r.link}},stream_ops:{read(r,i,s,u,d){var m=r.node.contents;if(d>=r.node.usedBytes)return 0;var _=Math.min(r.node.usedBytes-d,u);if(b(_>=0),_>8&&m.subarray)i.set(m.subarray(d,d+_),s);else for(var y=0;y<_;y++)i[s+y]=m[d+y];return _},write(r,i,s,u,d,m){if(b(!(i instanceof ArrayBuffer)),i.buffer===Y.buffer&&(m=!1),!u)return 0;var _=r.node;if(_.timestamp=Date.now(),i.subarray&&(!_.contents||_.contents.subarray)){if(m)return b(d===0,"canOwn must imply no weird position inside the file"),_.contents=i.subarray(s,s+u),_.usedBytes=u,u;if(_.usedBytes===0&&d===0)return _.contents=i.slice(s,s+u),_.usedBytes=u,u;if(d+u<=_.usedBytes)return _.contents.set(i.subarray(s,s+u),d),u}if(F.expandFileStorage(_,d+u),_.contents.subarray&&i.subarray)_.contents.set(i.subarray(s,s+u),d);else for(var y=0;y<u;y++)_.contents[d+y]=i[s+y];return _.usedBytes=Math.max(_.usedBytes,d+u),u},llseek(r,i,s){var u=i;if(s===1?u+=r.position:s===2&&l.isFile(r.node.mode)&&(u+=r.node.usedBytes),u<0)throw new l.ErrnoError(28);return u},allocate(r,i,s){F.expandFileStorage(r.node,i+s),r.node.usedBytes=Math.max(r.node.usedBytes,i+s)},mmap(r,i,s,u,d){if(!l.isFile(r.node.mode))throw new l.ErrnoError(43);var m,_,y=r.node.contents;if(!(d&2)&&y&&y.buffer===Y.buffer)_=!1,m=y.byteOffset;else{if(_=!0,m=Zr(),!m)throw new l.ErrnoError(48);y&&((s>0||s+i<y.length)&&(y.subarray?y=y.subarray(s,s+i):y=Array.prototype.slice.call(y,s,s+i)),Y.set(y,m))}return{ptr:m,allocated:_}},msync(r,i,s,u,d){return F.stream_ops.write(r,i,0,u,s,!1),0}}},Ni=(r,i,s,u)=>{var d=zr(`al ${r}`);x(r).then(m=>{b(m,`Loading data file "${r}" failed (no arrayBuffer).`),i(new Uint8Array(m)),d&&Pt(d)},m=>{if(s)s();else throw`Loading data file "${r}" failed.`}),d&&er(d)},Mi=(r,i,s,u,d,m)=>{l.createDataFile(r,i,s,u,d,m)},xi=o.preloadPlugins||[],Di=(r,i,s,u)=>{typeof Browser<"u"&&Browser.init();var d=!1;return xi.forEach(m=>{d||m.canHandle(i)&&(m.handle(r,i,s,u),d=!0)}),d},Li=(r,i,s,u,d,m,_,y,A,B)=>{var $=i?Me.resolve(q.join2(r,i)):r,H=zr(`cp ${$}`);function j(P){function U(ce){B?.(),y||Mi(r,i,ce,u,d,A),m?.(),Pt(H)}Di(P,$,U,()=>{_?.(),Pt(H)})||U(P)}er(H),typeof s=="string"?Ni(s,j,_):j(s)},Ii=r=>{var i={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},s=i[r];if(typeof s>"u")throw new Error(`Unknown file open mode: ${r}`);return s},or=(r,i)=>{var s=0;return r&&(s|=365),i&&(s|=146),s},Ui=r=>Ze(Yi(r)),Jr={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},l={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class extends Error{name="ErrnoError";constructor(r){super(Rt?Ui(r):""),this.errno=r;for(var i in Jr)if(Jr[i]===r){this.code=i;break}}},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{shared={};get object(){return this.node}set object(r){this.node=r}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(r){this.shared.flags=r}get position(){return this.shared.position}set position(r){this.shared.position=r}},FSNode:class{node_ops={};stream_ops={};readMode=365;writeMode=146;mounted=null;constructor(r,i,s,u){r||(r=this),this.parent=r,this.mount=r.mount,this.id=l.nextInode++,this.name=i,this.mode=s,this.rdev=u}get read(){return(this.mode&this.readMode)===this.readMode}set read(r){r?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(r){r?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return l.isDir(this.mode)}get isDevice(){return l.isChrdev(this.mode)}},lookupPath(r,i={}){if(r=Me.resolve(r),!r)return{path:"",node:null};var s={follow_mount:!0,recurse_count:0};if(i=Object.assign(s,i),i.recurse_count>8)throw new l.ErrnoError(32);for(var u=r.split("/").filter(H=>!!H),d=l.root,m="/",_=0;_<u.length;_++){var y=_===u.length-1;if(y&&i.parent)break;if(d=l.lookupNode(d,u[_]),m=q.join2(m,u[_]),l.isMountpoint(d)&&(!y||y&&i.follow_mount)&&(d=d.mounted.root),!y||i.follow)for(var A=0;l.isLink(d.mode);){var B=l.readlink(m);m=Me.resolve(q.dirname(m),B);var $=l.lookupPath(m,{recurse_count:i.recurse_count+1});if(d=$.node,A++>40)throw new l.ErrnoError(32)}}return{path:m,node:d}},getPath(r){for(var i;;){if(l.isRoot(r)){var s=r.mount.mountpoint;return i?s[s.length-1]!=="/"?`${s}/${i}`:s+i:s}i=i?`${r.name}/${i}`:r.name,r=r.parent}},hashName(r,i){for(var s=0,u=0;u<i.length;u++)s=(s<<5)-s+i.charCodeAt(u)|0;return(r+s>>>0)%l.nameTable.length},hashAddNode(r){var i=l.hashName(r.parent.id,r.name);r.name_next=l.nameTable[i],l.nameTable[i]=r},hashRemoveNode(r){var i=l.hashName(r.parent.id,r.name);if(l.nameTable[i]===r)l.nameTable[i]=r.name_next;else for(var s=l.nameTable[i];s;){if(s.name_next===r){s.name_next=r.name_next;break}s=s.name_next}},lookupNode(r,i){var s=l.mayLookup(r);if(s)throw new l.ErrnoError(s);for(var u=l.hashName(r.id,i),d=l.nameTable[u];d;d=d.name_next){var m=d.name;if(d.parent.id===r.id&&m===i)return d}return l.lookup(r,i)},createNode(r,i,s,u){b(typeof r=="object");var d=new l.FSNode(r,i,s,u);return l.hashAddNode(d),d},destroyNode(r){l.hashRemoveNode(r)},isRoot(r){return r===r.parent},isMountpoint(r){return!!r.mounted},isFile(r){return(r&61440)===32768},isDir(r){return(r&61440)===16384},isLink(r){return(r&61440)===40960},isChrdev(r){return(r&61440)===8192},isBlkdev(r){return(r&61440)===24576},isFIFO(r){return(r&61440)===4096},isSocket(r){return(r&49152)===49152},flagsToPermissionString(r){var i=["r","w","rw"][r&3];return r&512&&(i+="w"),i},nodePermissions(r,i){return l.ignorePermissions?0:i.includes("r")&&!(r.mode&292)||i.includes("w")&&!(r.mode&146)||i.includes("x")&&!(r.mode&73)?2:0},mayLookup(r){if(!l.isDir(r.mode))return 54;var i=l.nodePermissions(r,"x");return i||(r.node_ops.lookup?0:2)},mayCreate(r,i){try{var s=l.lookupNode(r,i);return 20}catch{}return l.nodePermissions(r,"wx")},mayDelete(r,i,s){var u;try{u=l.lookupNode(r,i)}catch(m){return m.errno}var d=l.nodePermissions(r,"wx");if(d)return d;if(s){if(!l.isDir(u.mode))return 54;if(l.isRoot(u)||l.getPath(u)===l.cwd())return 10}else if(l.isDir(u.mode))return 31;return 0},mayOpen(r,i){return r?l.isLink(r.mode)?32:l.isDir(r.mode)&&(l.flagsToPermissionString(i)!=="r"||i&512)?31:l.nodePermissions(r,l.flagsToPermissionString(i)):44},MAX_OPEN_FDS:4096,nextfd(){for(var r=0;r<=l.MAX_OPEN_FDS;r++)if(!l.streams[r])return r;throw new l.ErrnoError(33)},getStreamChecked(r){var i=l.getStream(r);if(!i)throw new l.ErrnoError(8);return i},getStream:r=>l.streams[r],createStream(r,i=-1){return b(i>=-1),r=Object.assign(new l.FSStream,r),i==-1&&(i=l.nextfd()),r.fd=i,l.streams[i]=r,r},closeStream(r){l.streams[r]=null},dupStream(r,i=-1){var s=l.createStream(r,i);return s.stream_ops?.dup?.(s),s},chrdev_stream_ops:{open(r){var i=l.getDevice(r.node.rdev);r.stream_ops=i.stream_ops,r.stream_ops.open?.(r)},llseek(){throw new l.ErrnoError(70)}},major:r=>r>>8,minor:r=>r&255,makedev:(r,i)=>r<<8|i,registerDevice(r,i){l.devices[r]={stream_ops:i}},getDevice:r=>l.devices[r],getMounts(r){for(var i=[],s=[r];s.length;){var u=s.pop();i.push(u),s.push(...u.mounts)}return i},syncfs(r,i){typeof r=="function"&&(i=r,r=!1),l.syncFSRequests++,l.syncFSRequests>1&&D(`warning: ${l.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var s=l.getMounts(l.root.mount),u=0;function d(_){return b(l.syncFSRequests>0),l.syncFSRequests--,i(_)}function m(_){if(_)return m.errored?void 0:(m.errored=!0,d(_));++u>=s.length&&d(null)}s.forEach(_=>{if(!_.type.syncfs)return m(null);_.type.syncfs(_,r,m)})},mount(r,i,s){if(typeof r=="string")throw r;var u=s==="/",d=!s,m;if(u&&l.root)throw new l.ErrnoError(10);if(!u&&!d){var _=l.lookupPath(s,{follow_mount:!1});if(s=_.path,m=_.node,l.isMountpoint(m))throw new l.ErrnoError(10);if(!l.isDir(m.mode))throw new l.ErrnoError(54)}var y={type:r,opts:i,mountpoint:s,mounts:[]},A=r.mount(y);return A.mount=y,y.root=A,u?l.root=A:m&&(m.mounted=y,m.mount&&m.mount.mounts.push(y)),A},unmount(r){var i=l.lookupPath(r,{follow_mount:!1});if(!l.isMountpoint(i.node))throw new l.ErrnoError(28);var s=i.node,u=s.mounted,d=l.getMounts(u);Object.keys(l.nameTable).forEach(_=>{for(var y=l.nameTable[_];y;){var A=y.name_next;d.includes(y.mount)&&l.destroyNode(y),y=A}}),s.mounted=null;var m=s.mount.mounts.indexOf(u);b(m!==-1),s.mount.mounts.splice(m,1)},lookup(r,i){return r.node_ops.lookup(r,i)},mknod(r,i,s){var u=l.lookupPath(r,{parent:!0}),d=u.node,m=q.basename(r);if(!m||m==="."||m==="..")throw new l.ErrnoError(28);var _=l.mayCreate(d,m);if(_)throw new l.ErrnoError(_);if(!d.node_ops.mknod)throw new l.ErrnoError(63);return d.node_ops.mknod(d,m,i,s)},statfs(r){var i={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:l.nextInode,ffree:l.nextInode-1,fsid:42,flags:2,namelen:255},s=l.lookupPath(r,{follow:!0}).node;return s?.node_ops.statfs&&Object.assign(i,s.node_ops.statfs(s.mount.opts.root)),i},create(r,i=438){return i&=4095,i|=32768,l.mknod(r,i,0)},mkdir(r,i=511){return i&=1023,i|=16384,l.mknod(r,i,0)},mkdirTree(r,i){for(var s=r.split("/"),u="",d=0;d<s.length;++d)if(s[d]){u+="/"+s[d];try{l.mkdir(u,i)}catch(m){if(m.errno!=20)throw m}}},mkdev(r,i,s){return typeof s>"u"&&(s=i,i=438),i|=8192,l.mknod(r,i,s)},symlink(r,i){if(!Me.resolve(r))throw new l.ErrnoError(44);var s=l.lookupPath(i,{parent:!0}),u=s.node;if(!u)throw new l.ErrnoError(44);var d=q.basename(i),m=l.mayCreate(u,d);if(m)throw new l.ErrnoError(m);if(!u.node_ops.symlink)throw new l.ErrnoError(63);return u.node_ops.symlink(u,d,r)},rename(r,i){var s=q.dirname(r),u=q.dirname(i),d=q.basename(r),m=q.basename(i),_,y,A;if(_=l.lookupPath(r,{parent:!0}),y=_.node,_=l.lookupPath(i,{parent:!0}),A=_.node,!y||!A)throw new l.ErrnoError(44);if(y.mount!==A.mount)throw new l.ErrnoError(75);var B=l.lookupNode(y,d),$=Me.relative(r,u);if($.charAt(0)!==".")throw new l.ErrnoError(28);if($=Me.relative(i,s),$.charAt(0)!==".")throw new l.ErrnoError(55);var H;try{H=l.lookupNode(A,m)}catch{}if(B!==H){var j=l.isDir(B.mode),P=l.mayDelete(y,d,j);if(P)throw new l.ErrnoError(P);if(P=H?l.mayDelete(A,m,j):l.mayCreate(A,m),P)throw new l.ErrnoError(P);if(!y.node_ops.rename)throw new l.ErrnoError(63);if(l.isMountpoint(B)||H&&l.isMountpoint(H))throw new l.ErrnoError(10);if(A!==y&&(P=l.nodePermissions(y,"w"),P))throw new l.ErrnoError(P);l.hashRemoveNode(B);try{y.node_ops.rename(B,A,m),B.parent=A}catch(U){throw U}finally{l.hashAddNode(B)}}},rmdir(r){var i=l.lookupPath(r,{parent:!0}),s=i.node,u=q.basename(r),d=l.lookupNode(s,u),m=l.mayDelete(s,u,!0);if(m)throw new l.ErrnoError(m);if(!s.node_ops.rmdir)throw new l.ErrnoError(63);if(l.isMountpoint(d))throw new l.ErrnoError(10);s.node_ops.rmdir(s,u),l.destroyNode(d)},readdir(r){var i=l.lookupPath(r,{follow:!0}),s=i.node;if(!s.node_ops.readdir)throw new l.ErrnoError(54);return s.node_ops.readdir(s)},unlink(r){var i=l.lookupPath(r,{parent:!0}),s=i.node;if(!s)throw new l.ErrnoError(44);var u=q.basename(r),d=l.lookupNode(s,u),m=l.mayDelete(s,u,!1);if(m)throw new l.ErrnoError(m);if(!s.node_ops.unlink)throw new l.ErrnoError(63);if(l.isMountpoint(d))throw new l.ErrnoError(10);s.node_ops.unlink(s,u),l.destroyNode(d)},readlink(r){var i=l.lookupPath(r),s=i.node;if(!s)throw new l.ErrnoError(44);if(!s.node_ops.readlink)throw new l.ErrnoError(28);return s.node_ops.readlink(s)},stat(r,i){var s=l.lookupPath(r,{follow:!i}),u=s.node;if(!u)throw new l.ErrnoError(44);if(!u.node_ops.getattr)throw new l.ErrnoError(63);return u.node_ops.getattr(u)},lstat(r){return l.stat(r,!0)},chmod(r,i,s){var u;if(typeof r=="string"){var d=l.lookupPath(r,{follow:!s});u=d.node}else u=r;if(!u.node_ops.setattr)throw new l.ErrnoError(63);u.node_ops.setattr(u,{mode:i&4095|u.mode&-4096,timestamp:Date.now()})},lchmod(r,i){l.chmod(r,i,!0)},fchmod(r,i){var s=l.getStreamChecked(r);l.chmod(s.node,i)},chown(r,i,s,u){var d;if(typeof r=="string"){var m=l.lookupPath(r,{follow:!u});d=m.node}else d=r;if(!d.node_ops.setattr)throw new l.ErrnoError(63);d.node_ops.setattr(d,{timestamp:Date.now()})},lchown(r,i,s){l.chown(r,i,s,!0)},fchown(r,i,s){var u=l.getStreamChecked(r);l.chown(u.node,i,s)},truncate(r,i){if(i<0)throw new l.ErrnoError(28);var s;if(typeof r=="string"){var u=l.lookupPath(r,{follow:!0});s=u.node}else s=r;if(!s.node_ops.setattr)throw new l.ErrnoError(63);if(l.isDir(s.mode))throw new l.ErrnoError(31);if(!l.isFile(s.mode))throw new l.ErrnoError(28);var d=l.nodePermissions(s,"w");if(d)throw new l.ErrnoError(d);s.node_ops.setattr(s,{size:i,timestamp:Date.now()})},ftruncate(r,i){var s=l.getStreamChecked(r);if((s.flags&2097155)===0)throw new l.ErrnoError(28);l.truncate(s.node,i)},utime(r,i,s){var u=l.lookupPath(r,{follow:!0}),d=u.node;d.node_ops.setattr(d,{timestamp:Math.max(i,s)})},open(r,i,s=438){if(r==="")throw new l.ErrnoError(44);i=typeof i=="string"?Ii(i):i,i&64?s=s&4095|32768:s=0;var u;if(typeof r=="object")u=r;else{r=q.normalize(r);try{var d=l.lookupPath(r,{follow:!(i&131072)});u=d.node}catch{}}var m=!1;if(i&64)if(u){if(i&128)throw new l.ErrnoError(20)}else u=l.mknod(r,s,0),m=!0;if(!u)throw new l.ErrnoError(44);if(l.isChrdev(u.mode)&&(i&=-513),i&65536&&!l.isDir(u.mode))throw new l.ErrnoError(54);if(!m){var _=l.mayOpen(u,i);if(_)throw new l.ErrnoError(_)}i&512&&!m&&l.truncate(u,0),i&=-131713;var y=l.createStream({node:u,path:l.getPath(u),flags:i,seekable:!0,position:0,stream_ops:u.stream_ops,ungotten:[],error:!1});return y.stream_ops.open&&y.stream_ops.open(y),o.logReadFiles&&!(i&1)&&(r in l.readFiles||(l.readFiles[r]=1)),y},close(r){if(l.isClosed(r))throw new l.ErrnoError(8);r.getdents&&(r.getdents=null);try{r.stream_ops.close&&r.stream_ops.close(r)}catch(i){throw i}finally{l.closeStream(r.fd)}r.fd=null},isClosed(r){return r.fd===null},llseek(r,i,s){if(l.isClosed(r))throw new l.ErrnoError(8);if(!r.seekable||!r.stream_ops.llseek)throw new l.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new l.ErrnoError(28);return r.position=r.stream_ops.llseek(r,i,s),r.ungotten=[],r.position},read(r,i,s,u,d){if(b(s>=0),u<0||d<0)throw new l.ErrnoError(28);if(l.isClosed(r))throw new l.ErrnoError(8);if((r.flags&2097155)===1)throw new l.ErrnoError(8);if(l.isDir(r.node.mode))throw new l.ErrnoError(31);if(!r.stream_ops.read)throw new l.ErrnoError(28);var m=typeof d<"u";if(!m)d=r.position;else if(!r.seekable)throw new l.ErrnoError(70);var _=r.stream_ops.read(r,i,s,u,d);return m||(r.position+=_),_},write(r,i,s,u,d,m){if(b(s>=0),u<0||d<0)throw new l.ErrnoError(28);if(l.isClosed(r))throw new l.ErrnoError(8);if((r.flags&2097155)===0)throw new l.ErrnoError(8);if(l.isDir(r.node.mode))throw new l.ErrnoError(31);if(!r.stream_ops.write)throw new l.ErrnoError(28);r.seekable&&r.flags&1024&&l.llseek(r,0,2);var _=typeof d<"u";if(!_)d=r.position;else if(!r.seekable)throw new l.ErrnoError(70);var y=r.stream_ops.write(r,i,s,u,d,m);return _||(r.position+=y),y},allocate(r,i,s){if(l.isClosed(r))throw new l.ErrnoError(8);if(i<0||s<=0)throw new l.ErrnoError(28);if((r.flags&2097155)===0)throw new l.ErrnoError(8);if(!l.isFile(r.node.mode)&&!l.isDir(r.node.mode))throw new l.ErrnoError(43);if(!r.stream_ops.allocate)throw new l.ErrnoError(138);r.stream_ops.allocate(r,i,s)},mmap(r,i,s,u,d){if((u&2)!==0&&(d&2)===0&&(r.flags&2097155)!==2)throw new l.ErrnoError(2);if((r.flags&2097155)===1)throw new l.ErrnoError(2);if(!r.stream_ops.mmap)throw new l.ErrnoError(43);if(!i)throw new l.ErrnoError(28);return r.stream_ops.mmap(r,i,s,u,d)},msync(r,i,s,u,d){return b(s>=0),r.stream_ops.msync?r.stream_ops.msync(r,i,s,u,d):0},ioctl(r,i,s){if(!r.stream_ops.ioctl)throw new l.ErrnoError(59);return r.stream_ops.ioctl(r,i,s)},readFile(r,i={}){if(i.flags=i.flags||0,i.encoding=i.encoding||"binary",i.encoding!=="utf8"&&i.encoding!=="binary")throw new Error(`Invalid encoding type "${i.encoding}"`);var s,u=l.open(r,i.flags),d=l.stat(r),m=d.size,_=new Uint8Array(m);return l.read(u,_,0,m,0),i.encoding==="utf8"?s=Qe(_):i.encoding==="binary"&&(s=_),l.close(u),s},writeFile(r,i,s={}){s.flags=s.flags||577;var u=l.open(r,s.flags,s.mode);if(typeof i=="string"){var d=new Uint8Array(Ct(i)+1),m=rr(i,d,0,d.length);l.write(u,d,0,m,void 0,s.canOwn)}else if(ArrayBuffer.isView(i))l.write(u,i,0,i.byteLength,void 0,s.canOwn);else throw new Error("Unsupported data type");l.close(u)},cwd:()=>l.currentPath,chdir(r){var i=l.lookupPath(r,{follow:!0});if(i.node===null)throw new l.ErrnoError(44);if(!l.isDir(i.node.mode))throw new l.ErrnoError(54);var s=l.nodePermissions(i.node,"x");if(s)throw new l.ErrnoError(s);l.currentPath=i.path},createDefaultDirectories(){l.mkdir("/tmp"),l.mkdir("/home"),l.mkdir("/home/web_user")},createDefaultDevices(){l.mkdir("/dev"),l.registerDevice(l.makedev(1,3),{read:()=>0,write:(u,d,m,_,y)=>_,llseek:()=>0}),l.mkdev("/dev/null",l.makedev(1,3)),He.register(l.makedev(5,0),He.default_tty_ops),He.register(l.makedev(6,0),He.default_tty1_ops),l.mkdev("/dev/tty",l.makedev(5,0)),l.mkdev("/dev/tty1",l.makedev(6,0));var r=new Uint8Array(1024),i=0,s=()=>(i===0&&(i=Xr(r).byteLength),r[--i]);l.createDevice("/dev","random",s),l.createDevice("/dev","urandom",s),l.mkdir("/dev/shm"),l.mkdir("/dev/shm/tmp")},createSpecialDirectories(){l.mkdir("/proc");var r=l.mkdir("/proc/self");l.mkdir("/proc/self/fd"),l.mount({mount(){var i=l.createNode(r,"fd",16895,73);return i.node_ops={lookup(s,u){var d=+u,m=l.getStreamChecked(d),_={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>m.path}};return _.parent=_,_}},i}},{},"/proc/self/fd")},createStandardStreams(r,i,s){r?l.createDevice("/dev","stdin",r):l.symlink("/dev/tty","/dev/stdin"),i?l.createDevice("/dev","stdout",null,i):l.symlink("/dev/tty","/dev/stdout"),s?l.createDevice("/dev","stderr",null,s):l.symlink("/dev/tty1","/dev/stderr");var u=l.open("/dev/stdin",0),d=l.open("/dev/stdout",1),m=l.open("/dev/stderr",1);b(u.fd===0,`invalid handle for stdin (${u.fd})`),b(d.fd===1,`invalid handle for stdout (${d.fd})`),b(m.fd===2,`invalid handle for stderr (${m.fd})`)},staticInit(){l.nameTable=new Array(4096),l.mount(F,{},"/"),l.createDefaultDirectories(),l.createDefaultDevices(),l.createSpecialDirectories(),l.filesystems={MEMFS:F}},init(r,i,s){b(!l.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),l.initialized=!0,r??=o.stdin,i??=o.stdout,s??=o.stderr,l.createStandardStreams(r,i,s)},quit(){l.initialized=!1,Wi(0);for(var r=0;r<l.streams.length;r++){var i=l.streams[r];i&&l.close(i)}},findObject(r,i){var s=l.analyzePath(r,i);return s.exists?s.object:null},analyzePath(r,i){try{var s=l.lookupPath(r,{follow:!i});r=s.path}catch{}var u={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var s=l.lookupPath(r,{parent:!0});u.parentExists=!0,u.parentPath=s.path,u.parentObject=s.node,u.name=q.basename(r),s=l.lookupPath(r,{follow:!i}),u.exists=!0,u.path=s.path,u.object=s.node,u.name=s.node.name,u.isRoot=s.path==="/"}catch(d){u.error=d.errno}return u},createPath(r,i,s,u){r=typeof r=="string"?r:l.getPath(r);for(var d=i.split("/").reverse();d.length;){var m=d.pop();if(m){var _=q.join2(r,m);try{l.mkdir(_)}catch{}r=_}}return _},createFile(r,i,s,u,d){var m=q.join2(typeof r=="string"?r:l.getPath(r),i),_=or(u,d);return l.create(m,_)},createDataFile(r,i,s,u,d,m){var _=i;r&&(r=typeof r=="string"?r:l.getPath(r),_=i?q.join2(r,i):r);var y=or(u,d),A=l.create(_,y);if(s){if(typeof s=="string"){for(var B=new Array(s.length),$=0,H=s.length;$<H;++$)B[$]=s.charCodeAt($);s=B}l.chmod(A,y|146);var j=l.open(A,577);l.write(j,s,0,s.length,0,m),l.close(j),l.chmod(A,y)}},createDevice(r,i,s,u){var d=q.join2(typeof r=="string"?r:l.getPath(r),i),m=or(!!s,!!u);l.createDevice.major??=64;var _=l.makedev(l.createDevice.major++,0);return l.registerDevice(_,{open(y){y.seekable=!1},close(y){u?.buffer?.length&&u(10)},read(y,A,B,$,H){for(var j=0,P=0;P<$;P++){var U;try{U=s()}catch{throw new l.ErrnoError(29)}if(U===void 0&&j===0)throw new l.ErrnoError(6);if(U==null)break;j++,A[B+P]=U}return j&&(y.node.timestamp=Date.now()),j},write(y,A,B,$,H){for(var j=0;j<$;j++)try{u(A[B+j])}catch{throw new l.ErrnoError(29)}return $&&(y.node.timestamp=Date.now()),j}}),l.mkdev(d,m,_)},forceLoadFile(r){if(r.isDevice||r.isFolder||r.link||r.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{r.contents=z(r.url),r.usedBytes=r.contents.length}catch{throw new l.ErrnoError(29)}},createLazyFile(r,i,s,u,d){class m{lengthKnown=!1;chunks=[];get(P){if(!(P>this.length-1||P<0)){var U=P%this.chunkSize,ce=P/this.chunkSize|0;return this.getter(ce)[U]}}setDataGetter(P){this.getter=P}cacheLength(){var P=new XMLHttpRequest;if(P.open("HEAD",s,!1),P.send(null),!(P.status>=200&&P.status<300||P.status===304))throw new Error("Couldn't load "+s+". Status: "+P.status);var U=Number(P.getResponseHeader("Content-length")),ce,ye=(ce=P.getResponseHeader("Accept-Ranges"))&&ce==="bytes",pe=(ce=P.getResponseHeader("Content-Encoding"))&&ce==="gzip",we=1024*1024;ye||(we=U);var ke=(Oe,Je)=>{if(Oe>Je)throw new Error("invalid range ("+Oe+", "+Je+") or no bytes requested!");if(Je>U-1)throw new Error("only "+U+" bytes available! programmer error!");var ue=new XMLHttpRequest;if(ue.open("GET",s,!1),U!==we&&ue.setRequestHeader("Range","bytes="+Oe+"-"+Je),ue.responseType="arraybuffer",ue.overrideMimeType&&ue.overrideMimeType("text/plain; charset=x-user-defined"),ue.send(null),!(ue.status>=200&&ue.status<300||ue.status===304))throw new Error("Couldn't load "+s+". Status: "+ue.status);return ue.response!==void 0?new Uint8Array(ue.response||[]):Qr(ue.responseText||"")},gt=this;gt.setDataGetter(Oe=>{var Je=Oe*we,ue=(Oe+1)*we-1;if(ue=Math.min(ue,U-1),typeof gt.chunks[Oe]>"u"&&(gt.chunks[Oe]=ke(Je,ue)),typeof gt.chunks[Oe]>"u")throw new Error("doXHR failed!");return gt.chunks[Oe]}),(pe||!U)&&(we=U=1,U=this.getter(0).length,we=U,Q("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=U,this._chunkSize=we,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!p)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var _=new m,y={isDevice:!1,contents:_}}else var y={isDevice:!1,url:s};var A=l.createFile(r,i,y,u,d);y.contents?A.contents=y.contents:y.url&&(A.contents=null,A.url=y.url),Object.defineProperties(A,{usedBytes:{get:function(){return this.contents.length}}});var B={},$=Object.keys(A.stream_ops);$.forEach(j=>{var P=A.stream_ops[j];B[j]=(...U)=>(l.forceLoadFile(A),P(...U))});function H(j,P,U,ce,ye){var pe=j.node.contents;if(ye>=pe.length)return 0;var we=Math.min(pe.length-ye,ce);if(b(we>=0),pe.slice)for(var ke=0;ke<we;ke++)P[U+ke]=pe[ye+ke];else for(var ke=0;ke<we;ke++)P[U+ke]=pe.get(ye+ke);return we}return B.read=(j,P,U,ce,ye)=>(l.forceLoadFile(A),H(j,P,U,ce,ye)),B.mmap=(j,P,U,ce,ye)=>{l.forceLoadFile(A);var pe=Zr();if(!pe)throw new l.ErrnoError(48);return H(j,Y,pe,P,U),{ptr:pe,allocated:!0}},A.stream_ops=B,A},absolutePath(){te("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder(){te("FS.createFolder has been removed; use FS.mkdir instead")},createLink(){te("FS.createLink has been removed; use FS.symlink instead")},joinPath(){te("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc(){te("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath(){te("FS.standardizePath has been removed; use PATH.normalize instead")}},wt={DEFAULT_POLLMASK:5,calculateAt(r,i,s){if(q.isAbs(i))return i;var u;if(r===-100)u=l.cwd();else{var d=wt.getStreamFromFD(r);u=d.path}if(i.length==0){if(!s)throw new l.ErrnoError(44);return u}return q.join2(u,i)},doStat(r,i,s){var u=r(i);re[s>>2]=u.dev,re[s+4>>2]=u.mode,V[s+8>>2]=u.nlink,re[s+12>>2]=u.uid,re[s+16>>2]=u.gid,re[s+20>>2]=u.rdev,se=[u.size>>>0,(I=u.size,+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],re[s+24>>2]=se[0],re[s+28>>2]=se[1],re[s+32>>2]=4096,re[s+36>>2]=u.blocks;var d=u.atime.getTime(),m=u.mtime.getTime(),_=u.ctime.getTime();return se=[Math.floor(d/1e3)>>>0,(I=Math.floor(d/1e3),+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],re[s+40>>2]=se[0],re[s+44>>2]=se[1],V[s+48>>2]=d%1e3*1e3*1e3,se=[Math.floor(m/1e3)>>>0,(I=Math.floor(m/1e3),+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],re[s+56>>2]=se[0],re[s+60>>2]=se[1],V[s+64>>2]=m%1e3*1e3*1e3,se=[Math.floor(_/1e3)>>>0,(I=Math.floor(_/1e3),+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],re[s+72>>2]=se[0],re[s+76>>2]=se[1],V[s+80>>2]=_%1e3*1e3*1e3,se=[u.ino>>>0,(I=u.ino,+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],re[s+88>>2]=se[0],re[s+92>>2]=se[1],0},doMsync(r,i,s,u,d){if(!l.isFile(i.node.mode))throw new l.ErrnoError(43);if(u&2)return 0;var m=ie.slice(r,r+s);l.msync(i,m,d,s,u)},getStreamFromFD(r){var i=l.getStreamChecked(r);return i},varargs:void 0,getStr(r){var i=Ze(r);return i}};function Bi(r){try{var i=wt.getStreamFromFD(r);return l.close(i),0}catch(s){if(typeof l>"u"||s.name!=="ErrnoError")throw s;return s.errno}}var ji=(r,i,s,u)=>{for(var d=0,m=0;m<s;m++){var _=V[i>>2],y=V[i+4>>2];i+=8;var A=l.read(r,Y,_,y,u);if(A<0)return-1;if(d+=A,A<y)break}return d};function zi(r,i,s,u){try{var d=wt.getStreamFromFD(r),m=ji(d,i,s);return V[u>>2]=m,0}catch(_){if(typeof l>"u"||_.name!=="ErrnoError")throw _;return _.errno}}var $i=(r,i)=>(b(r==r>>>0||r==(r|0)),b(i===(i|0)),i+2097152>>>0<4194305-!!r?(r>>>0)+i*4294967296:NaN);function Hi(r,i,s,u,d){var m=$i(i,s);try{if(isNaN(m))return 61;var _=wt.getStreamFromFD(r);return l.llseek(_,m,u),se=[_.position>>>0,(I=_.position,+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],re[d>>2]=se[0],re[d+4>>2]=se[1],_.getdents&&m===0&&u===0&&(_.getdents=null),0}catch(y){if(typeof l>"u"||y.name!=="ErrnoError")throw y;return y.errno}}var Ki=(r,i,s,u)=>{for(var d=0,m=0;m<s;m++){var _=V[i>>2],y=V[i+4>>2];i+=8;var A=l.write(r,Y,_,y,u);if(A<0)return-1;if(d+=A,A<y)break}return d};function Vi(r,i,s,u){try{var d=wt.getStreamFromFD(r),m=Ki(d,i,s);return V[u>>2]=m,0}catch(_){if(typeof l>"u"||_.name!=="ErrnoError")throw _;return _.errno}}l.createPreloadedFile=Li,l.staticInit();function Gi(){hi("fetchSettings")}var en={__assert_fail:wi,__cxa_throw:_i,_abort_js:Ei,_emscripten_memcpy_js:yi,_tzset_js:ki,emscripten_resize_heap:Oi,environ_get:Ri,environ_sizes_get:Pi,fd_close:Bi,fd_read:zi,fd_seek:Hi,fd_write:Vi},Ke=fi();o._create_position=J("create_position",1),o._delete_position=J("delete_position",1),o._make_move=J("make_move",2),o._unmake_move=J("unmake_move",2),o._get_legal_moves=J("get_legal_moves",2),o._malloc=J("malloc",1),o._free_legal_moves=J("free_legal_moves",1),o._free=J("free",1),o._pos_attacks_to=J("pos_attacks_to",4),o._pos_attacks=J("pos_attacks",3),o._get_pieces_bb=J("get_pieces_bb",4),o._get_pieces_color_bb=J("get_pieces_color_bb",3),o._get_occupied=J("get_occupied",2),o._get_attacks=J("get_attacks",6),o._get_turn=J("get_turn",1),o._get_at=J("get_at",2),o._get_fen=J("get_fen",1),o._is_checkmate=J("is_checkmate",1),o._init=J("init",0);var Wi=J("fflush",1),Yi=J("strerror",1),tn=()=>(tn=Ke.emscripten_stack_init)(),sr=()=>(sr=Ke.emscripten_stack_get_end)();o.dynCall_viijii=J("dynCall_viijii",7),o.dynCall_jiji=J("dynCall_jiji",5),o.dynCall_iiiiij=J("dynCall_iiiiij",7),o.dynCall_iiiiijj=J("dynCall_iiiiijj",9),o.dynCall_iiiiiijj=J("dynCall_iiiiiijj",10);var qi=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","stackAlloc","getTempRet0","setTempRet0","exitJS","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","emscriptenLog","readEmAsmArgs","jstoi_q","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","HandleAllocator","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","intArrayToString","AsciiToString","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToNewUTF8","stringToUTF8OnStack","writeArrayToMemory","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","polyfillSetImmediate","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","findMatchingCatch","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_unlink","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","setErrNo","demangle","stackTrace"];qi.forEach(di);var Xi=["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","out","err","callMain","abort","wasmMemory","wasmExports","writeStackCookie","checkStackCookie","convertI32PairToI53Checked","stackSave","stackRestore","ptrToString","zeroMemory","getHeapMax","growMemory","ENV","ERRNO_CODES","strError","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","jstoi_s","getExecutableName","asyncLoad","alignMemory","mmapAlloc","wasmTable","noExitRuntime","freeTableIndexes","functionsInTableMap","setValue","getValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","intArrayFromString","stringToAscii","UTF16Decoder","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","getEnvStrings","doReadv","doWritev","initRandomFill","randomFill","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","Browser","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","preloadPlugins","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar_buffer","FS_stdin_getChar","FS_createPath","FS_createDevice","FS_readFile","FS","FS_createDataFile","FS_createLazyFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","print","printErr"];Xi.forEach(Yr);var Ft;ut=function r(){Ft||rn(),Ft||(ut=r)};function Qi(){tn(),Jn()}function rn(){if(Be>0||(Qi(),ei(),Be>0))return;function r(){Ft||(Ft=!0,o.calledRun=!0,!Z&&(ti(),a(o),o.onRuntimeInitialized?.(),b(!o._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),ri()))}o.setStatus?(o.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>o.setStatus(""),1),r()},1)):r(),Jt()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();rn(),n=h;for(const r of Object.keys(o))r in e||Object.defineProperty(e,r,{configurable:!0,get(){te(`Access to module property ('${r}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return n}})();const ss=0,jn=1,xr=2,zn=3,$n=4,Hn=5,Kn=6,as=0,ls=16384;function cs(t){return t>>3}function us(t){return t&7}function fs(t){let e=hs(t.role);return t.color==="black"?e+8:e}function hs(t){switch(t){case"pawn":return jn;case"knight":return xr;case"bishop":return zn;case"rook":return $n;case"queen":return Hn;case"king":return Kn}}function ds(t){switch(t){case jn:return"pawn";case xr:return"knight";case zn:return"bishop";case $n:return"rook";case Hn:return"queen";case Kn:return"king"}throw"No Piece Type"}function ps(t){let e=t&63,n=t>>6&63,a=(t&49152)===ls?ds((t>>12&3)+xr):void 0;return{from:n,to:e,promotion:a}}class Vn{m;static async make(e){let n=await os({locateFile:e});return n._init(),new Vn(n)}constructor(e){this.m=e}create_position(e){return this.m._create_position(this.stringToWasm(e))}delete_position(e){this.m._delete_position(e)}unmake_move(e,n){this.m._unmake_move(e,n)}make_move(e,n){this.m._make_move(e,n)}pos_turn(e){return this.m._get_turn(e)===ss?"white":"black"}get_legal_moves(e){const n=this.m._malloc(4);let o=this.m._get_legal_moves(e,n);const a=this.m.getValue(n,"i32");let c=[];for(let h=0;h<a;h++){const f=this.m.getValue(o+h*4,"i32");c.push(f)}return this.m._free(n),this.m._free(o),c}pos_occupied(e){const n=this.m._malloc(8);this.m._get_occupied(e,n);const o=this.m.getValue(n,"i32"),a=this.m.getValue(n+4,"i32");return this.m._free(n),new k(o,a)}attacks(e,n,o){const a=this.m._malloc(8);this.m._get_attacks(us(e),cs(e),n,o.lo,o.hi,a);const c=this.m.getValue(a,"i32"),h=this.m.getValue(a+4,"i32");return this.m._free(a),new k(c,h)}pos_attacks(e,n){const o=this.m._malloc(8);this.m._pos_attacks(e,n,o);const a=this.m.getValue(o,"i32"),c=this.m.getValue(o+4,"i32");return this.m._free(o),new k(a,c)}pos_attacks_of_color(e,n){const o=this.m._malloc(8);this.m._pos_attacks_to(e,n,0,o);const a=this.m.getValue(o,"i32"),c=this.m.getValue(o+4,"i32");return this.m._free(o),new k(a,c)}get_pieces_color_bb(e,n){const o=this.m._malloc(8);this.m._get_pieces_color_bb(e,n,o);const a=this.m.getValue(o,"i32"),c=this.m.getValue(o+4,"i32");return this.m._free(o),new k(a,c)}get_pieces_bb(e,n){const o=this.m._malloc(8),a=this.m._malloc(4*n.length);for(let f=0;f<n.length;f++)this.m.setValue(a+f*4,n[f],"i32");this.m._get_pieces_bb(e,a,n.length,o);const c=this.m.getValue(o,"i32"),h=this.m.getValue(o+4,"i32");return this.m._free(o),this.m._free(a),new k(c,h)}get_at(e,n){let o=this.m._get_at(e,n);if(o!==as)return o}is_checkmate(e){return this.m._is_checkmate(e)}get_pos_read_fen(e){let n=this.wasmToStringAndFree(this.m._get_fen(e));return Ot.fromSetup(St(n).unwrap()).unwrap()}make_san(e,n){let o=this.get_pos_read_fen(e);return Sr(o,ps(n))}stringToWasm(e){let n=this.m;const o=e.length+1,a=n._malloc(o);return n.stringToUTF8(e,a,o),a}wasmToStringAndFree(e){return this.m.UTF8ToString(e)}}var R;(function(t){t.MATE="MATE",t.ZERO="ZERO",t.PIECE_NAME="PIECE_NAME",t.SQUARE_NAME="SQUARE_NAME",t.OPERATOR_MOVE="OPERATOR_MOVE",t.OPERATOR_ATTACK="OPERATOR_ATTACK",t.OPERATOR_DEFEND="OPERATOR_DEFEND",t.OPERATOR_BLOCK="OPERATOR_BLOCK",t.OPERATOR_UNBLOCK="OPERATOR_UNBLOCK",t.PRECESSOR="PRECESSOR",t.EOF="EOF"})(R||(R={}));const Gn=["p","n","q","b","k","r","p2","n2","b2","r2"],Wn=["P","N","Q","B","K","R","P2","N2","B2","R2"],Yt=Gn.concat(Wn),ms=["G","Z","A","E","."],ws=["f7","f2"];class gs{text;pos;current_char;operators;constructor(e){this.text=e,this.pos=0,this.current_char=this.text[this.pos],this.operators=new Map([["=",R.OPERATOR_MOVE],["+",R.OPERATOR_ATTACK],["-",R.OPERATOR_DEFEND],["/",R.OPERATOR_BLOCK],["|",R.OPERATOR_UNBLOCK]])}advance(){this.pos++,this.current_char=this.text[this.pos]}skip_whitespace(){for(;this.current_char!==void 0&&/\s/.test(this.current_char);)this.advance()}is_alpha_num(e){return/[a-zA-Z0-9_]/.test(e)}word(){let e="";for(;this.current_char!==void 0&&this.is_alpha_num(this.current_char);)e+=this.current_char,this.advance();return e}get_next_token(){for(;this.current_char!==void 0;){if(this.skip_whitespace(),this.current_char==="#")return this.advance(),{type:R.MATE,value:"#"};if(this.current_char==="0")return this.advance(),{type:R.ZERO,value:"0"};if(this.current_char===".")return this.advance(),{type:R.PRECESSOR,value:"."};const e=this.word();if(ms.includes(e))return{type:R.PRECESSOR,value:e};if(Yt.includes(e))return{type:R.PIECE_NAME,value:e};if(ws.includes(e))return{type:R.SQUARE_NAME,value:e};if(this.operators.has(this.current_char)){let n=this.current_char,o=this.operators.get(this.current_char);return this.advance(),{type:o,value:n}}if(this.current_char===void 0)break;throw new _s(`Unexpected token ${this.current_char}`)}return{type:R.EOF,value:""}}}class _s extends Error{}class wn extends Error{}class Es{lexer;current_token;lookahead_token;lookahead2_token;constructor(e){this.lexer=e,this.current_token=this.lexer.get_next_token(),this.lookahead_token=this.lexer.get_next_token(),this.lookahead2_token=this.lexer.get_next_token()}error(e){throw e?new wn(`Expected ${e} but got ${this.current_token.type} ('${this.current_token.value}')`):new wn(`Unexpected token ${this.current_token.type} ('${this.current_token.value}')`)}advance_tokens(){this.current_token=this.lookahead_token,this.lookahead_token=this.lookahead2_token,this.lookahead2_token=this.lexer.get_next_token()}eat(e){this.current_token.type===e?this.advance_tokens():this.error(e)}piece(){const e=this.current_token;return this.eat(R.PIECE_NAME),e.value}precessor(){const e=this.current_token;return this.eat(R.PRECESSOR),e.value}parse_sentence(){const e=this.precessor();if(this.current_token.type===R.EOF)return{type:"precessor",precessor:e};if(this.current_token.type===R.OPERATOR_MOVE){const n=this.parse_capture(e);return this.eat(R.EOF),n}else if(this.lookahead_token.type===R.OPERATOR_MOVE){const n=this.parse_move_attack(e);return this.eat(R.EOF),n}else{const n=this.parse_attack(e);return this.eat(R.EOF),n}}parse_capture(e){this.eat(R.OPERATOR_MOVE);let n=this.piece();return{type:"capture",precessor:e,captured:n}}parse_attack(e){let n=this.piece(),o=[],a=[],c=!1,h=!1;for(;this.current_token.type===R.ZERO;)this.eat(R.ZERO),this.current_token.type===R.OPERATOR_ATTACK?(this.eat(R.OPERATOR_ATTACK),c=!0):this.current_token.type===R.OPERATOR_DEFEND&&(this.eat(R.OPERATOR_DEFEND),h=!0);return{type:"attack",precessor:e,piece:n,to_attack:o,to_defend:a,zero_attack:c,zero_defend:h}}parse_move_attack(e){let n=this.piece();this.eat(R.OPERATOR_MOVE),this.current_token.type===R.SQUARE_NAME&&(this.current_token.value,this.advance_tokens());let o=[],a=[],c=[],h=[],f,p=!1,g=!1,w=!1;for(;;){let E=this.current_token.type,O=this.lookahead_token.type;if(E===R.MATE)this.eat(R.MATE),w=!0;else if(E===R.ZERO)this.eat(R.ZERO),this.current_token.type===R.OPERATOR_ATTACK?(this.eat(R.OPERATOR_ATTACK),p=!0):this.current_token.type===R.OPERATOR_DEFEND&&(this.eat(R.OPERATOR_DEFEND),g=!0);else if(E===R.OPERATOR_MOVE)this.eat(R.OPERATOR_MOVE),f=this.piece();else if(O===R.OPERATOR_ATTACK){let T=this.piece();if(this.eat(R.OPERATOR_ATTACK),this.current_token.type===R.OPERATOR_UNBLOCK){this.eat(R.OPERATOR_UNBLOCK);let S=this.piece();c.push([T,S])}else h.push(T)}else if(E===R.OPERATOR_ATTACK){this.eat(R.OPERATOR_ATTACK);let T=this.piece();if(E=this.current_token.type,E===R.OPERATOR_BLOCK){this.eat(R.OPERATOR_BLOCK);let S=this.piece();a.push([T,S]);continue}o.push(T)}else break}return{type:"move_attack",precessor:e,move:n,captured:f,attack:o,blocked:a,unblocked:c,zero_attack:p,zero_defend:g,attacked_by:h,is_mate:w}}}function ys(t){let e=t.trim().split(`
`),n={depth:-1,rule:"*",children:[],m:[],long:!1,no_c:!1,sentence:{type:"undefined",precessor:"E"}};const o=[n];for(let a=0;a<e.length;a++){let c=e[a],h=c.trim();if(!h)continue;const f=c.search(/\S/);let p=!1,g=!1;h[h.length-1]==="5"&&(g=!0,h=h.slice(0,-1).trim()),h[h.length-1]==="M"&&(p=!0,h=h.slice(0,-1).trim());let w={depth:f,rule:h,children:[],m:[],long:g,no_c:p,sentence:{type:"undefined",precessor:"E"}};for(;o.length>f+1;)o.pop();o[o.length-1].children.push(w),o.push(w)}return n}function Yn(t){let n=new Es(new gs(t.rule)).parse_sentence();t.sentence=n,t.children.map(Yn)}function qn(t){let e=t.sentence;Rr();let n=t.children.map(qn);return{sentence:e,children:n,res:[],children_resolved:!1,line:t}}function ks(t){return[{before:t.before,after:t.after,move:t.move}]}function Tr(t,e,n,o){let a=t.sentence.precessor==="E"||t.sentence.precessor==="A"?ae(o):o,c=t.res,h=Ps(t.sentence);for(let f of n){let p=f.data.after,g=t.sentence.precessor==="E"?Ns(p,e):t.sentence.precessor==="A"?Ms(p,e):ks(f.data);e:for(;g.length!==0;){g=g.filter(h);for(let E of g);for(let E of e)g=g.filter(O=>(O.after[E]===void 0||!O.after[E].isEmpty())&&(O.before[E]===void 0||!O.before[E].isEmpty()));let w=[];for(let E of g){let O=bs(E,e);if(O.length===0){if(t.sentence.type==="move_attack"&&t.sentence.is_mate&&!vs(E))continue;if(c.length>=7e4||(c.push({parent:f,data:E,turn:a}),c.length>=3e4))break e}else w.push(...O)}g=w}}if(t.sentence.precessor==="E"){let f=c;for(let p of t.children){let g=Tr(p,e,f,a);f=f.filter(w=>!g.find(E=>E===w||E.parent===w))}(t.children.length===0||f.length<n.length)&&(t.children_resolved=!0)}else if(t.sentence.precessor==="A"){let f=c;for(let p of t.children){let g=Tr(p,e,f,a);f=f.filter(w=>!g.find(E=>E===w||E.parent===w))}(t.children.length===0||f.length===0)&&(t.children_resolved=!0)}else(t.sentence.precessor==="."||t.sentence.precessor==="G")&&(t.children_resolved=!0);return c}let yt;function wa(t){yt=t}function ga(t,e){let a=Os(e,t).trim().split(`
`)[1].match(/<[^\s]* [^\s]* [^\s]* [^\s]* [^\s]* [^\s]* ([^>]*)/)?.[1];return a?.includes(".")?a.slice(0,a.indexOf(".")):a}function vs(t){let e=Pr(t.after,"black"),n=yt.create_position(e),o=yt.is_checkmate(n);return yt.delete_position(n),o}function bs(t,e){let n=[];for(let o of e){if(t.move&&t.move[0]===o)continue;let a={...t.before},c=2;for(;a[o]!==void 0&&a[o].singleSquare()===void 0&&c--!==0;){let h={...a};Ls(h,o);let f=h,p={...t.after};p[o]=f[o];let g=t.move;n.push({before:f,after:p,move:g}),As(a,o,h[o].singleSquare())}if(n.length>0)break}return n}function As(t,e,n){t[e]=t[e]?.without(n)}function Os(t,e,n){let o=ys(t);o.children.forEach(Yn);let a=qn(o),c={data:{before:Rr(),after:Rr()},turn:"white"};return e&&Ss(c.data,e),n===void 0&&(n=js(t)),Tr(a.children[0],n,[c],"black"),Qn(a)}function Ss(t,e){let n={},o=Ot.fromSetup(St(e).unwrap()).unwrap();for(let a of k.full()){let c=o.board.get(a);if(c){let h=Ts(c);n[h]===1?(n[h]=2,h+="2"):n[h]=1,t.before[h]=k.fromSquare(a),t.after[h]=k.fromSquare(a)}}}function Ts(t){const e={knight:"n",rook:"r",bishop:"b",king:"k",queen:"q",pawn:"p"};return t.color==="white"?e[t.role].toLowerCase():e[t.role].toUpperCase()}const Rs=t=>!0;function Ps(t){return t.type==="move_attack"?Ds(t):t.type==="capture"?xs(t):(t.type,t.type==="precessor"&&t.precessor,Rs)}const Cs=t=>t.filter(e=>e.toLowerCase()===e),Fs=t=>t.filter(e=>e.toLowerCase()!==e),Ns=(t,e)=>{let n=Lr(t),o=[];for(let a of Cs(e)){if(t[a]===void 0)continue;let c={...t};Xn(c,a);for(let h of t[a]){let f={...t};qt(f,a,h);for(let p of De(me(a),h,n)){let g={...c};qt(g,a,p),o.push({before:f,after:g,move:[a,h,p]})}}}return o},Ms=(t,e)=>{let n=Lr(t),o=[];for(let a of Fs(e)){if(t[a]===void 0)continue;let c={...t};Xn(c,a);for(let h of t[a]){let f={...t};qt(f,a,h);for(let p of De(me(a),h,n)){let g={...c};qt(g,a,p),o.push({before:f,after:g,move:[a,h,p]})}}}return o};function xs(t){return e=>{let n=e.move;return n&&e.before[t.captured]?.has(n[2])?(e.after[t.captured]=void 0,!0):!1}}function Ds(t){let e=me(t.move),n=t.attack.map(me),o=t.blocked.map(([p,g])=>[me(p),me(g)]),a=t.unblocked.map(([p,g])=>[me(p),me(g)]);t.captured&&me(t.captured);let c=t.attacked_by.map(me),h=t.zero_defend,f=t.is_mate;return p=>{if(!p.move||p.move[0]!==t.move)return!1;if(t.captured)if(p.before[t.captured]?.has(p.move[2]))if(t.move===p.move[0])p.after[t.captured]=void 0;else return!1;else return!1;let g=p.before,w=p.after,[E,O,T]=p.move,S=Lr(w);if(h)for(let v of Bs(e.color)){if(w[v]===void 0)continue;let Q=k.empty(),D=me(v);for(let ne of w[v])De(D,ne,S).has(T)||(Q=Q.set(ne,!0));w[v]=Q}let M=n.map(v=>k.empty()),x=o.map(v=>[k.empty(),k.empty()]),z=a.map(v=>[k.empty(),k.empty()]),K=c.map(v=>k.empty());w[t.move];let ee=De(e,T,S),W=w;for(let v=0;v<t.attack.length;v++){let Q=t.attack[v];if(w[Q]===void 0)return!1;let D=!0;for(let ne of ee.intersect(w[Q]))M[v]=M[v].set(ne,!0),D=!1;if(D)return!1}for(let v=0;v<t.blocked.length;v++){let[Q,D]=t.blocked[v];if(w[D]===void 0||w[Q]===void 0)return!1;let ne=!0;for(let le of ee.intersect(w[D])){let Z=De(e,T,S.without(O).without(le));for(let b of Z.intersect(w[Q]))Le(T,b).has(le)&&(x[v][0]=x[v][0].set(b,!0),x[v][1]=x[v][1].set(le,!0),ne=!1)}if(ne)return!1}for(let v=0;v<t.unblocked.length;v++){let[Q,D]=t.unblocked[v];if(w[D]===void 0||w[Q]===void 0)return!1;let ne=!0;for(let le of w[Q]){let Z=De(a[v][0],le,S.without(O));for(let b of w[D])Z.has(b)&&Le(le,b).has(O)&&(z[v][0]=z[v][0].set(le,!0),z[v][1]=z[v][1].set(b,!0),ne=!1)}if(ne)return!1}for(let v=0;v<t.attacked_by.length;v++){let Q=t.attacked_by[v];if(w[Q]===void 0)return!1;let D=!0;for(let ne of w[Q])De(c[v],ne,S).has(T)&&(K[v]=K[v].set(ne,!0),D=!1);if(D)return!1}for(let v=0;v<t.attacked_by.length;v++)W[t.attacked_by[v]]=K[v],g[t.attacked_by[v]]=K[v];for(let v=0;v<t.attack.length;v++)W[t.attack[v]]=M[v],g[t.attack[v]]=M[v];for(let v=0;v<t.blocked.length;v++)W[t.blocked[v][0]]=x[v][0],W[t.blocked[v][1]]=x[v][1],g[t.blocked[v][0]]=x[v][0],g[t.blocked[v][1]]=x[v][1];for(let v=0;v<t.unblocked.length;v++)W[t.unblocked[v][0]]=z[v][0],W[t.unblocked[v][1]]=z[v][1],g[t.unblocked[v][0]]=z[v][0],g[t.unblocked[v][1]]=z[v][1];if(f){if(W.K===void 0)return!1;let v=k.empty();for(let Q of W.K)De(e,p.move[2],S).has(Q)&&(v=v.set(Q,!0));W.K=v,g.K=v}return!0}}const Dr=Yt;function Rr(){let t={};for(let e of Dr)t[e]=k.full();return t}function qt(t,e,n){t[e]=k.fromSquare(n)}function Xn(t,e){t[e]=k.empty()}function Lr(t){let e=k.empty();for(let n of Dr)t[n]?.singleSquare()!==void 0&&(e=e.union(t[n]));return e}function Ls(t,e,n=0){if(t[e]===void 0)return!1;for(let a=0;a<n;a++)t[e]=t[e].withoutFirst();let o=t[e].first();return o===void 0?!1:(t[e]=k.fromSquare(o),!0)}function Pr(t,e="white"){let n=Ot.fromSetupUnchecked(St(Yo).unwrap());n.turn=e;for(let o of Dr){let a=t[o]?.singleSquare();if(a!==void 0){if(Is(o)===void 0)continue;n.board.set(a,me(o))}}return rs(n.toSetup())}function Is(t){if(!t.includes("quare"))return me(t)}function me(t){const e=c=>c.toLowerCase()===c?"white":"black",n={r:"rook",n:"knight",b:"bishop",p:"pawn",q:"queen",k:"king"};if(t==="app")return{color:"black",role:"pawn"};if(t==="APP")return{color:"white",role:"pawn"};let o=e(t),a=n[t.replace(/2/,"").toLowerCase()];return{color:o,role:a}}function Us(t,e){if(!t.data.move)return"";let n=Pr(t.data.before,e),o=Ot.fromSetupUnchecked(St(n).unwrap()),a={from:t.data.move[1],to:t.data.move[2]},c=Sr(o,a);if(!t.parent)return`${n} ${c}`;let h=[],f=t;for(;f.parent!==void 0;){if(!f.data.move)continue;n=Pr(f.data.before,f.turn);let p=Ot.fromSetupUnchecked(St(n).unwrap()),g={from:f.data.move[1],to:f.data.move[2]},w=Sr(p,g);h.push(w),f=f.parent}return h.reverse(),`${n} ${h.join(" ")}`}function Qn(t){let e=t.line,n="",o=" ".repeat(e.depth+1),a=e.long?150:1,c=(e.no_c,t.res),h=e.depth%2===1?"black":"white",f=c.slice(0,a).map(g=>Us(g,h)).join(", ");c.length>1&&(f+=" .."+c.length);let p=t.children_resolved;return n+=" "+e.rule+(p?" OK":" ?")+" <"+(f??"?")+`>
`,t.children.map((g,w)=>{w===t.children.length-1?n+=o+"":w===0?n+=o+"":n+=o+" ",n+=Qn(g)}).join(""),n}function Bs(t){return t==="white"?Gn:Wn}function js(t){let e=[];for(let n=0;n<t.length;n++)Yt.includes(t[n+0]+t[n+1])&&(e.push(t[n+0]+t[n+1]),n+=2),Yt.includes(t[n+0])&&e.push(t[n+0]);return e}const De=(t,e,n)=>yt.attacks(fs(t),e,n);function zs(t,e){let n,o=()=>!n||n.state==="unresolved"?void 0:n.latest;[n]=kn(()=>$s(t,de(o)),c=>c,e);const a=()=>n();return Object.defineProperty(a,"latest",{get(){return n.latest}}),a}class ge{static all(){return new ge}static allSettled(){return new ge}static any(){return new ge}static race(){return new ge}static reject(){return new ge}static resolve(){return new ge}catch(){return new ge}then(){return new ge}finally(){return new ge}}function $s(t,e){if(!L.context)return t(e);const n=fetch,o=Promise;try{return window.fetch=()=>new ge,Promise=ge,t(e)}finally{window.fetch=n,Promise=o}}function Hs(t){return new Worker(""+new URL("worker2-CM63NdBF.js",import.meta.url).href,{type:"module",name:t?.name})}const Zn=An(),Ks=()=>io(Zn),Vs=t=>{let e=new Hs;const[n,o]=be(),[a,c]=be(),[h,f]=be();e.onmessage=M=>{switch(M.data==="ready"&&(p=!0,E()),M.data.t){case"progress":o(M.data.d);break;case"puzzles":let{all:x,filtered:z}=M.data.d;vn(()=>{f(x),c(z)});break}};let p=!1,g,w=[];function E(){p&&e.postMessage({t:"filter",d:{filter:g,rules:w}})}let S={get progress(){return n()},get puzzles(){return a()},get all(){return h()},filter:M=>{g=M,E()},rules:M=>{w=M,E()}};return it(Zn.Provider,{value:S,get children(){return[" ",Eo(()=>t.children)," "]}})};function Gs(){let t=Ks(),e=zs(async()=>t.all??[],{initialValue:[]}),[n,o]=xn({get a_hundred(){return e()}});return[n,{}]}function Ws(t){let[e,n]=Gs(),[o,a]=xn({tactics:e}),c={...n},h=[o,c];return it(Ys.Provider,{value:h,get children(){return t.children}})}const Ys=An(),qs=wo(()=>Pn(()=>import("./Show-o4aK0LJ5.js"),__vite__mapDeps([0,1]),import.meta.url));function Xs(){return it(Vs,{get children(){return it(Ws,{get children(){return it(qs,{})}})}})}const Qs=document.getElementById("root");ko(()=>it(Xs,{}),Qs);const Zs=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{Os as A,fa as B,Js as C,wa as D,sa as F,Vn as P,aa as S,to as a,oa as b,Re as c,de as d,oo as e,it as f,Ut as g,da as h,vo as i,ea as j,bn as k,ca as l,ia as m,be as n,ta as o,Ks as p,xn as q,ma as r,ua as s,la as t,pa as u,ha as v,vn as w,ho as x,zs as y,ga as z};
